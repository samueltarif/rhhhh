import{e as C,l as y,m as k,w as x,q as M,s as F,o as i,a as t,v as N,c,i as e,t as s,f as R,r as v,x as L,b as h,k as f,F as S,d as q,y as I}from"./BlCT4Jl9.js";import{_ as U}from"./CEyuO6_n.js";import{_ as J}from"./Bbk0fRQu.js";import{_ as O}from"./BE3tLiUO.js";const T=["d"],G={class:"text-xl font-bold text-gray-800 mb-2"},K={class:"text-gray-500"},Q=C({__name:"DashboardCard",props:{title:{},description:{},to:{},color:{default:"blue"},iconPath:{default:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}},setup(r){const d=r,g={blue:{bg:"bg-blue-100",icon:"text-blue-600",hover:"group-hover:bg-blue-200"},green:{bg:"bg-green-100",icon:"text-green-600",hover:"group-hover:bg-green-200"},purple:{bg:"bg-purple-100",icon:"text-purple-600",hover:"group-hover:bg-purple-200"},orange:{bg:"bg-orange-100",icon:"text-orange-600",hover:"group-hover:bg-orange-200"}},p=y(()=>g[d.color].bg),b=y(()=>g[d.color].icon),m=y(()=>g[d.color].hover);return(u,n)=>(i(),k(F(r.to?"NuxtLink":"div"),{to:r.to,class:M(["bg-white rounded-2xl p-6 shadow-sm border border-gray-100 transition-all",r.to?"hover:shadow-md hover:border-primary-200 group":""])},{default:x(()=>[t("div",{class:M(["w-14 h-14 rounded-xl flex items-center justify-center mb-4 transition-colors",[e(p),r.to?e(m):""]])},[N(u.$slots,"icon",{},()=>[(i(),c("svg",{class:M(["w-7 h-7",e(b)]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:r.iconPath},null,8,T)],2))])],2),t("h3",G,s(r.title),1),t("p",K,s(r.description),1),N(u.$slots,"default")]),_:3},8,["to","class"]))}}),W=Object.assign(Q,{__name:"DashboardCard"}),X={class:"w-10 h-10 mb-3 opacity-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Y=["d"],Z={class:"text-3xl font-bold"},tt={class:"text-white/80"},ot=C({__name:"DashboardStatCard",props:{to:{},value:{},label:{},color:{},iconPath:{}},setup(r){const d=r,g={blue:"bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",purple:"bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",green:"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",orange:"bg-gradient-to-br from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700"},p=y(()=>g[d.color]);return(b,m)=>{const u=O;return i(),k(u,{to:r.to,class:M(["rounded-2xl p-5 text-white transition-all",e(p)])},{default:x(()=>[(i(),c("svg",X,[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:r.iconPath},null,8,Y)])),t("p",Z,s(r.value),1),t("p",tt,s(r.label),1)]),_:1},8,["to","class"])}}}),et=Object.assign(ot,{__name:"DashboardStatCard"}),at={class:"mb-8"},st={class:"text-3xl lg:text-4xl font-bold text-gray-800"},rt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},lt={class:"space-y-4"},it={class:"text-lg font-semibold text-gray-800"},dt={class:"text-lg font-semibold text-gray-800"},ct={key:0},mt={class:"text-lg font-semibold text-gray-800"},ut={class:"text-sm text-gray-500"},gt={class:"space-y-4"},pt={class:"text-lg font-semibold text-gray-800"},ht={class:"text-lg font-semibold text-gray-800"},vt={key:0},bt={class:"text-lg font-semibold text-gray-800"},xt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},_t={class:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-5 text-white"},ft={class:"text-3xl font-bold"},yt={key:0,class:"text-center py-8"},Mt={key:1,class:"text-center py-8 text-gray-500"},wt={key:2,class:"space-y-4"},Ct={class:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center"},kt={class:"text-orange-600 font-bold text-lg"},Dt={class:"flex-1"},$t={class:"font-semibold text-gray-900"},Bt={class:"text-sm text-gray-600"},jt=C({__name:"dashboard",setup(r){const{user:d,isAdmin:g}=R(),p=v({totalFuncionarios:0,totalDepartamentos:0,folhaMensal:0,totalAniversariantes:0}),b=v([]),m=v(!0),u=v(null),n=v(null),D=v({}),$=v({}),H=()=>{const a=new Date,l=new Date(a.getTime()-10800*1e3).getHours();return l>=5&&l<12?"Bom dia":l>=12&&l<18?"Boa tarde":"Boa noite"},z=a=>{const o=a?.toString();return D.value[o]||o||"NÃ£o informado"},j=a=>{const o=a?.toString();return $.value[o]||o||"NÃ£o informado"},V=async()=>{try{const a=await $fetch("/api/cargos");a.success&&a.data&&a.data.forEach(l=>{D.value[l.id.toString()]=l.nome});const o=await $fetch("/api/departamentos");o.success&&o.data&&o.data.forEach(l=>{$.value[l.id.toString()]=l.nome})}catch(a){console.error("Erro ao carregar mapas:",a)}},A=async()=>{try{if(m.value=!0,await V(),d.value?.id)try{const a=await $fetch(`/api/funcionarios/meus-dados?userId=${d.value.id}`);a.success&&(u.value=a.data,n.value=a.data.empresas)}catch(a){console.error("Erro ao carregar dados do usuÃ¡rio:",a)}if(g.value){const[a,o]=await Promise.all([$fetch("/api/dashboard/stats"),$fetch("/api/dashboard/aniversariantes")]);p.value=a,b.value=o}}catch(a){console.error("Erro ao carregar dados do dashboard:",a)}finally{m.value=!1}},E=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a);return L(()=>{A()}),(a,o)=>{const l=W,P=U,B=J,w=et;return i(),c("div",null,[t("div",at,[t("h1",st,s(H())+" "+s(e(d)?.nome?.split(" ")[0])+"! ",1),o[0]||(o[0]=t("p",{class:"text-lg text-gray-500 mt-2"}," Bem-vindo ao Sistema de RH. Aqui vocÃª encontra tudo sobre sua vida profissional. ",-1))]),t("div",rt,[h(l,{to:"/meus-dados",title:"Meus Dados",description:"Veja e atualize suas informaÃ§Ãµes pessoais",color:"blue","icon-path":"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}),e(g)?f("",!0):(i(),k(l,{key:0,to:"/holerites",title:"Meus Holerites",description:"Acesse seus contracheques e baixe em PDF",color:"green","icon-path":"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),h(l,{title:e(n)?e(n).nome_fantasia||e(n).nome:"Minha Empresa",description:e(n)?`CNPJ: ${e(n).cnpj||"NÃ£o informado"}`:"Aguardando cadastro",color:"purple","icon-path":"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},{default:x(()=>[h(P,{variant:e(n)?"success":"warning",class:"mt-3"},{default:x(()=>[q(s(e(n)?"âœ“ Vinculado":"â³ Pendente"),1)]),_:1},8,["variant"])]),_:1},8,["title","description"])]),h(B,{title:"Suas InformaÃ§Ãµes",icon:"â„¹ï¸",class:"mb-8"},{default:x(()=>[t("div",nt,[t("div",lt,[t("div",null,[o[1]||(o[1]=t("p",{class:"text-sm text-gray-500 mb-1"},"Nome Completo",-1)),t("p",it,s(e(u)?.nome_completo||e(d)?.nome),1)]),t("div",null,[o[2]||(o[2]=t("p",{class:"text-sm text-gray-500 mb-1"},"Cargo",-1)),t("p",dt,s(z(e(u)?.cargo_id)),1)]),e(n)?(i(),c("div",ct,[o[3]||(o[3]=t("p",{class:"text-sm text-gray-500 mb-1"},"Empresa",-1)),t("p",mt,s(e(n).nome_fantasia||e(n).nome),1),t("p",ut,s(e(n).nome),1)])):f("",!0)]),t("div",gt,[t("div",null,[o[4]||(o[4]=t("p",{class:"text-sm text-gray-500 mb-1"},"Departamento",-1)),t("p",pt,s(j(e(u)?.departamento_id)),1)]),t("div",null,[o[5]||(o[5]=t("p",{class:"text-sm text-gray-500 mb-1"},"Email",-1)),t("p",ht,s(e(u)?.email||e(d)?.email),1)]),e(n)?.cnpj?(i(),c("div",vt,[o[6]||(o[6]=t("p",{class:"text-sm text-gray-500 mb-1"},"CNPJ da Empresa",-1)),t("p",bt,s(e(n).cnpj),1)])):f("",!0)])])]),_:1}),e(g)?(i(),c(S,{key:0},[o[11]||(o[11]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3"}," ðŸ›¡ï¸ Ãrea do Administrador ",-1)),t("div",xt,[h(w,{to:"/admin/funcionarios",value:e(m)?"...":e(p).totalFuncionarios.toString(),label:"FuncionÃ¡rios",color:"blue","icon-path":"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,8,["value"]),h(w,{to:"/admin/departamentos",value:e(m)?"...":e(p).totalDepartamentos.toString(),label:"Departamentos",color:"purple","icon-path":"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,8,["value"]),h(w,{to:"/admin/holerites",value:e(m)?"...":E(e(p).folhaMensal),label:"Folha Mensal",color:"green","icon-path":"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"},null,8,["value"]),t("div",_t,[o[7]||(o[7]=t("svg",{class:"w-10 h-10 mb-3 opacity-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 15.546c-.523 0-1.046.151-1.5.454a2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.701 2.701 0 00-1.5-.454M9 6v2m3-2v2m3-2v2M9 3h.01M12 3h.01M15 3h.01M21 21v-7a2 2 0 00-2-2H5a2 2 0 00-2 2v7h18zm-3-9v-2a2 2 0 00-2-2H8a2 2 0 00-2 2v2h12z"})],-1)),t("p",ft,s(e(m)?"...":e(p).totalAniversariantes),1),o[8]||(o[8]=t("p",{class:"text-white/80"},"Aniversariantes",-1))])]),h(B,{title:"ðŸŽ‚ Aniversariantes do MÃªs"},{default:x(()=>[e(m)?(i(),c("div",yt,[...o[9]||(o[9]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Carregando...",-1)])])):e(b).length===0?(i(),c("div",Mt," Nenhum aniversariante este mÃªs ")):(i(),c("div",wt,[(i(!0),c(S,null,I(e(b),_=>(i(),c("div",{key:_.id,class:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors"},[t("div",Ct,[t("span",kt,s(_.dia),1)]),t("div",Dt,[t("h4",$t,s(_.nome_completo),1),t("p",Bt,s(_.cargo)+" - "+s(_.departamento),1)]),o[10]||(o[10]=t("div",{class:"text-2xl"},"ðŸŽ‚",-1))]))),128))]))]),_:1})],64)):f("",!0)])}}});export{jt as default};
