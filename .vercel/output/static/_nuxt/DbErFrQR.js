import{_ as $}from"./B9ORdSW3.js";import{_ as D}from"./DKFfuTk7.js";import{_ as T}from"./Bbk0fRQu.js";import{_ as q}from"./1mwErJ78.js";import{_ as z}from"./qIMO2IYi.js";import{_ as A}from"./BUmjikbw.js";import{_ as F,a as H}from"./C0CVT-Gk.js";import{e as R,r as d,x as h,l as I,c as f,b as n,a,w as i,F as L,y as O,i as t,j as P,o as _,d as v,m as G,k as J,t as g,h as K}from"./BlCT4Jl9.js";import{u as Q}from"./CLAScuYw.js";const W={class:"space-y-4"},X={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},Y={class:"flex items-center gap-4"},Z={class:"text-xl font-bold text-gray-800"},ee={class:"text-gray-500"},oe={key:0,class:"text-sm text-gray-400 mt-1"},te={class:"flex justify-end gap-3 pt-4"},_e=R({__name:"cargos",setup(se){const{cargos:x,loading:V,carregarCargos:b,salvarCargo:y}=Q(),r=d(!1),u=d(null),l=d({nome:"",descricao:"",nivel:""}),m=d(!1),c=d({title:"",message:"",variant:"success"});h(()=>{b()});const k=I(()=>x.value.filter(s=>!u.value||s.id!==u.value.id).map(s=>({value:s.id,label:s.nome}))),C=s=>{u.value=s||null,l.value=s?{...s}:{nome:"",descricao:"",nivel:""},r.value=!0},w=async()=>{const s=u.value?{...l.value,id:u.value.id}:l.value,e=await y(s);c.value={title:e.success?"Sucesso!":"Erro!",message:e.message,variant:e.success?"success":"error"},m.value=!0,e.success&&(r.value=!1),setTimeout(()=>{m.value=!1},3e3)};return(s,e)=>{const p=$,U=D,N=T,M=q,B=z,S=A,j=F,E=H;return _(),f("div",null,[n(U,{title:"Cargos",description:"Defina os cargos e hierarquia da empresa"},{default:i(()=>[n(p,{size:"lg",icon:"âž•",onClick:e[0]||(e[0]=o=>C())},{default:i(()=>[...e[7]||(e[7]=[v(" Novo Cargo ",-1)])]),_:1})]),_:1}),a("div",W,[(_(!0),f(L,null,O(t(x),o=>(_(),G(N,{key:o.id,padding:"p-6"},{default:i(()=>[a("div",X,[a("div",Y,[e[8]||(e[8]=a("div",{class:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center"},[a("svg",{class:"w-7 h-7 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),a("div",null,[a("h3",Z,g(o.nome),1),a("p",ee,g(o.descricao),1),o.nivel?(_(),f("p",oe," NÃ­vel: "+g(o.nivel),1)):J("",!0)])]),n(p,{variant:"ghost",onClick:ae=>C(o)},{default:i(()=>[...e[9]||(e[9]=[v("âœï¸ Editar",-1)])]),_:1},8,["onClick"])])]),_:2},1024))),128))]),n(j,{modelValue:t(r),"onUpdate:modelValue":e[5]||(e[5]=o=>P(r)?r.value=o:null),title:t(u)?"Editar Cargo":"Novo Cargo"},{default:i(()=>[a("form",{onSubmit:K(w,["prevent"]),class:"space-y-4"},[n(M,{modelValue:t(l).nome,"onUpdate:modelValue":e[1]||(e[1]=o=>t(l).nome=o),label:"Nome do Cargo",required:""},null,8,["modelValue"]),n(B,{modelValue:t(l).descricao,"onUpdate:modelValue":e[2]||(e[2]=o=>t(l).descricao=o),label:"DescriÃ§Ã£o"},null,8,["modelValue"]),n(S,{modelValue:t(l).nivel,"onUpdate:modelValue":e[3]||(e[3]=o=>t(l).nivel=o),options:t(k),label:"Cargo Superior (Reporta a)",placeholder:"Nenhum (cargo mais alto)"},null,8,["modelValue","options"]),a("div",te,[n(p,{variant:"secondary",onClick:e[4]||(e[4]=o=>r.value=!1)},{default:i(()=>[...e[10]||(e[10]=[v("Cancelar",-1)])]),_:1}),n(p,{type:"submit",icon:"ðŸ’¾",disabled:t(V)},{default:i(()=>[...e[11]||(e[11]=[v("Salvar",-1)])]),_:1},8,["disabled"])])],32)]),_:1},8,["modelValue","title"]),n(E,{show:t(m),title:t(c).title,message:t(c).message,variant:t(c).variant,onClose:e[6]||(e[6]=o=>m.value=!1)},null,8,["show","title","message","variant"])])}}});export{_e as default};
