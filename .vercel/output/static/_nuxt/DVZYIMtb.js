import{_ as oo}from"./B9ORdSW3.js";import{_ as xo}from"./DKFfuTk7.js";import{_ as so}from"./Bbk0fRQu.js";import{_ as _o,a as Vo}from"./C0CVT-Gk.js";import{e as T,c as u,o as i,a,b as t,k as _,d as g,r as P,l as O,x as to,C as K,F as G,y as Q,q as yo,i as V,t as E,m as $,w as z,I,J as ao,n as Fo,j as lo,A as Uo,K as Eo}from"./BlCT4Jl9.js";import{_ as zo}from"./DzxIVruO.js";import{_ as M}from"./1mwErJ78.js";import{_ as q}from"./BUmjikbw.js";import{_ as ko}from"./DlV5lPLA.js";import{u as no}from"./BRUOHGkk.js";import{u as Co}from"./DAwH6dBM.js";import{u as $o}from"./CLAScuYw.js";import{u as Po}from"./tIBO3SJJ.js";import{_ as Do}from"./DpIGa6J_.js";import{_ as wo}from"./CEyuO6_n.js";const So={class:"space-y-4"},ho={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ao={class:"md:col-span-2"},Bo=T({__name:"FuncionarioDadosPessoais",props:{form:{}},setup(o){const U=[{value:"M",label:"Masculino"},{value:"F",label:"Feminino"},{value:"O",label:"Outro"}];return(l,r)=>{const d=M,p=ko,m=q;return i(),u("div",So,[r[8]||(r[8]=a("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸ‘¤ Dados Pessoais",-1)),a("div",ho,[a("div",Ao,[t(d,{modelValue:o.form.nome_completo,"onUpdate:modelValue":r[0]||(r[0]=c=>o.form.nome_completo=c),label:"Nome Completo",required:"",placeholder:"Digite o nome completo"},null,8,["modelValue"])]),t(d,{modelValue:o.form.cpf,"onUpdate:modelValue":r[1]||(r[1]=c=>o.form.cpf=c),label:"CPF",required:"",placeholder:"000.000.000-00"},null,8,["modelValue"]),t(p,{modelValue:o.form.pis_pasep,"onUpdate:modelValue":r[2]||(r[2]=c=>o.form.pis_pasep=c),label:"PIS/PASEP",placeholder:"000.00000.00-0"},null,8,["modelValue"]),t(d,{modelValue:o.form.rg,"onUpdate:modelValue":r[3]||(r[3]=c=>o.form.rg=c),label:"RG",placeholder:"00.000.000-0"},null,8,["modelValue"]),t(d,{modelValue:o.form.data_nascimento,"onUpdate:modelValue":r[4]||(r[4]=c=>o.form.data_nascimento=c),type:"date",label:"Data de Nascimento"},null,8,["modelValue"]),t(m,{modelValue:o.form.sexo,"onUpdate:modelValue":r[5]||(r[5]=c=>o.form.sexo=c),options:U,label:"Sexo",placeholder:"Selecione..."},null,8,["modelValue"]),t(d,{modelValue:o.form.telefone,"onUpdate:modelValue":r[6]||(r[6]=c=>o.form.telefone=c),label:"Telefone",placeholder:"(11) 99999-9999"},null,8,["modelValue"]),t(d,{modelValue:o.form.email_pessoal,"onUpdate:modelValue":r[7]||(r[7]=c=>o.form.email_pessoal=c),type:"email",uppercase:!1,label:"Email Pessoal",placeholder:"email@pessoal.com"},null,8,["modelValue"])])])}}}),Oo=Object.assign(Bo,{__name:"FuncionariosFuncionarioDadosPessoais"}),To={class:"space-y-4"},Ro={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jo={key:0,class:"md:col-span-2"},Jo=T({__name:"FuncionarioDadosProfissionais",props:{form:{},showEmpresaSelect:{type:Boolean,default:!1},empresasOptions:{},departamentosOptions:{},cargosOptions:{},jornadaOptionsComputed:{},responsavelOptions:{}},setup(o){const U=[{value:"CLT",label:"CLT"},{value:"PJ",label:"PJ"},{value:"Estagio",label:"EstÃ¡gio"},{value:"Temporario",label:"TemporÃ¡rio"}];return(l,r)=>{const d=q,p=M;return i(),u("div",To,[r[8]||(r[8]=a("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸ’¼ Dados Profissionais",-1)),a("div",Ro,[o.showEmpresaSelect?(i(),u("div",jo,[t(d,{modelValue:o.form.empresa_id,"onUpdate:modelValue":r[0]||(r[0]=m=>o.form.empresa_id=m),options:o.empresasOptions,label:"Empresa",placeholder:"Selecione a empresa..."},null,8,["modelValue","options"])])):_("",!0),t(d,{modelValue:o.form.departamento_id,"onUpdate:modelValue":r[1]||(r[1]=m=>o.form.departamento_id=m),options:o.departamentosOptions,label:"Departamento",placeholder:"Selecione..."},null,8,["modelValue","options"]),t(d,{modelValue:o.form.cargo_id,"onUpdate:modelValue":r[2]||(r[2]=m=>o.form.cargo_id=m),options:o.cargosOptions,label:"Cargo",placeholder:"Selecione..."},null,8,["modelValue","options"]),t(d,{modelValue:o.form.tipo_contrato,"onUpdate:modelValue":r[3]||(r[3]=m=>o.form.tipo_contrato=m),options:U,label:"Tipo de Contrato"},null,8,["modelValue"]),t(p,{modelValue:o.form.data_admissao,"onUpdate:modelValue":r[4]||(r[4]=m=>o.form.data_admissao=m),type:"date",label:"Data de AdmissÃ£o"},null,8,["modelValue"]),t(p,{modelValue:o.form.matricula,"onUpdate:modelValue":r[5]||(r[5]=m=>o.form.matricula=m),label:"MatrÃ­cula/Registro",placeholder:"Gerado automaticamente"},null,8,["modelValue"]),t(d,{modelValue:o.form.jornada_trabalho_id,"onUpdate:modelValue":r[6]||(r[6]=m=>o.form.jornada_trabalho_id=m),options:o.jornadaOptionsComputed,label:"Jornada de Trabalho"},null,8,["modelValue","options"]),t(d,{modelValue:o.form.responsavel_id,"onUpdate:modelValue":r[7]||(r[7]=m=>o.form.responsavel_id=m),options:o.responsavelOptions,label:"ResponsÃ¡vel Direto",placeholder:"Selecione..."},null,8,["modelValue","options"])]),r[9]||(r[9]=a("div",{class:"mt-4 p-4 bg-blue-50 rounded-xl"},[a("p",{class:"text-sm text-blue-700"},[g(" ðŸ‘©â€ðŸ’¼ "),a("strong",null,"ResponsÃ¡vel PadrÃ£o:"),g(" Silvana Ã© automaticamente definida como responsÃ¡vel direto de todos os funcionÃ¡rios. VocÃª pode alterar se necessÃ¡rio, mas por padrÃ£o ela supervisiona toda a equipe. ")])],-1))])}}}),No=Object.assign(Jo,{__name:"FuncionariosFuncionarioDadosProfissionais"}),Io={class:"space-y-4"},Lo={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Mo=T({__name:"FuncionarioAcessoSistema",props:{form:{}},setup(o){const U=[{value:"funcionario",label:"FuncionÃ¡rio"},{value:"admin",label:"Administrador"}],l=[{value:"ativo",label:"Ativo"},{value:"inativo",label:"Inativo"}];return(r,d)=>{const p=M,m=q;return i(),u("div",Io,[d[4]||(d[4]=a("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸ” Acesso ao Sistema",-1)),a("div",Lo,[t(p,{modelValue:o.form.email_login,"onUpdate:modelValue":d[0]||(d[0]=c=>o.form.email_login=c),type:"email",uppercase:!1,label:"Email de Login",required:"",placeholder:"email@empresa.com"},null,8,["modelValue"]),t(p,{modelValue:o.form.senha,"onUpdate:modelValue":d[1]||(d[1]=c=>o.form.senha=c),type:"password",label:"Senha",required:"","show-password-toggle":"",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"},null,8,["modelValue"]),t(m,{modelValue:o.form.tipo_acesso,"onUpdate:modelValue":d[2]||(d[2]=c=>o.form.tipo_acesso=c),options:U,label:"Tipo de Acesso"},null,8,["modelValue"]),t(m,{modelValue:o.form.status,"onUpdate:modelValue":d[3]||(d[3]=c=>o.form.status=c),options:l,label:"Status do UsuÃ¡rio"},null,8,["modelValue"])]),d[5]||(d[5]=a("div",{class:"mt-4 p-4 bg-blue-50 rounded-xl"},[a("h4",{class:"font-semibold text-blue-800 mb-2"},"ðŸ“‹ Tipos de Acesso:"),a("ul",{class:"text-sm text-blue-700 space-y-1"},[a("li",null,[a("strong",null,"FuncionÃ¡rio:"),g(" Visualiza apenas seus prÃ³prios dados")]),a("li",null,[a("strong",null,"Administrador:"),g(" Acesso total ao sistema")])])],-1))])}}}),qo=Object.assign(Mo,{__name:"FuncionariosFuncionarioAcessoSistema"}),Ho={class:"space-y-4"},Ko={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Go=T({__name:"FuncionarioDadosFinanceiros",props:{form:{}},setup(o){const U=[{value:"mensal",label:"Mensal"},{value:"quinzenal",label:"Quinzenal"},{value:"horista",label:"Horista"}],l=[{value:"deposito",label:"DepÃ³sito BancÃ¡rio"},{value:"pix",label:"PIX"}],r=[{value:"corrente",label:"Conta Corrente"},{value:"poupanca",label:"Conta PoupanÃ§a"},{value:"salario",label:"Conta SalÃ¡rio"}];return(d,p)=>{const m=M,c=q;return i(),u("div",Ho,[p[8]||(p[8]=a("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸ’° Dados Financeiros",-1)),a("div",Ko,[t(m,{modelValue:o.form.salario_base,"onUpdate:modelValue":p[0]||(p[0]=y=>o.form.salario_base=y),type:"number",uppercase:!1,step:"0.01",label:"SalÃ¡rio Base (R$)",placeholder:"0,00"},null,8,["modelValue"]),t(c,{modelValue:o.form.tipo_salario,"onUpdate:modelValue":p[1]||(p[1]=y=>o.form.tipo_salario=y),options:U,label:"Tipo de SalÃ¡rio"},null,8,["modelValue"]),t(m,{modelValue:o.form.numero_dependentes,"onUpdate:modelValue":p[2]||(p[2]=y=>o.form.numero_dependentes=y),type:"number",uppercase:!1,min:"0",step:"1",label:"NÃºmero de Dependentes (IRRF)",placeholder:"0"},null,8,["modelValue"]),t(m,{modelValue:o.form.banco,"onUpdate:modelValue":p[3]||(p[3]=y=>o.form.banco=y),label:"Banco",placeholder:"Nome do banco"},null,8,["modelValue"]),t(m,{modelValue:o.form.agencia,"onUpdate:modelValue":p[4]||(p[4]=y=>o.form.agencia=y),label:"AgÃªncia",placeholder:"0000"},null,8,["modelValue"]),t(m,{modelValue:o.form.conta,"onUpdate:modelValue":p[5]||(p[5]=y=>o.form.conta=y),label:"Conta",placeholder:"00000-0"},null,8,["modelValue"]),t(c,{modelValue:o.form.tipo_conta,"onUpdate:modelValue":p[6]||(p[6]=y=>o.form.tipo_conta=y),options:r,label:"Tipo de Conta",placeholder:"Selecione..."},null,8,["modelValue"]),t(c,{modelValue:o.form.forma_pagamento,"onUpdate:modelValue":p[7]||(p[7]=y=>o.form.forma_pagamento=y),options:l,label:"Forma de Pagamento"},null,8,["modelValue"])])])}}}),Qo=Object.assign(Go,{__name:"FuncionariosFuncionarioDadosFinanceiros"}),Wo=()=>{const o=P([]),U=P(!1),l=async()=>{U.value=!0;try{const d=await $fetch("/api/departamentos");d.success&&d.data?(o.value=Array.isArray(d.data)?d.data:[],console.log("âœ… Departamentos carregados:",o.value.length)):o.value=[]}catch(d){console.error("Erro ao carregar departamentos:",d),o.value=[]}finally{U.value=!1}},r=O(()=>Array.isArray(o.value)?o.value.map(d=>({value:d.id.toString(),label:d.nome})):[]);return{departamentos:o,loading:U,carregarDepartamentos:l,opcoesDepartamentos:r}},Xo={class:"space-y-6"},Yo={class:"border-b border-gray-200"},Zo={class:"-mb-px flex space-x-8"},oe=["onClick"],ee={class:"min-h-[400px]"},ae={key:4,class:"space-y-6"},le={key:0,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl"},ne={key:1,class:"space-y-4"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={key:0,class:"p-4 border border-gray-200 rounded-xl"},ie={class:"flex items-center justify-between mb-3"},re={key:0,class:"space-y-3"},de={key:0},ce={key:1,class:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},me={key:1,class:"p-4 border border-gray-200 rounded-xl"},ue={class:"flex items-center justify-between mb-3"},fe={key:0,class:"space-y-3"},pe={key:0},ve={key:1,class:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},be={key:2,class:"p-4 border border-gray-200 rounded-xl"},ge={class:"flex items-center justify-between mb-3"},xe={key:0,class:"space-y-3"},_e={key:0},Ve={key:1,class:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},ye={key:3,class:"p-4 border border-gray-200 rounded-xl"},Fe={class:"flex items-center justify-between mb-3"},Ue={key:0,class:"space-y-3"},Ee={key:0},ze={key:1,class:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},ke={key:2,class:"p-4 bg-red-50 border border-red-200 rounded-xl"},Ce={key:3,class:"space-y-4"},$e={class:"flex items-center justify-between"},Pe={class:"space-y-4"},De={class:"flex items-center justify-between mb-3"},we={class:"flex items-center gap-2"},Se={class:"flex items-center gap-2"},he={key:0,class:"space-y-3"},Ae={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Be={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Oe={key:1,class:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},Te={key:0,class:"p-4 text-center text-gray-500 border-2 border-dashed border-gray-200 rounded-xl"},Re={key:4,class:"space-y-4"},je={class:"flex items-center justify-between"},Je={class:"space-y-3"},Ne={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ie={class:"flex items-end"},Le={class:"mt-3 flex gap-4"},Me={key:0,class:"p-4 text-center text-gray-500 border-2 border-dashed border-gray-200 rounded-xl"},qe={key:5,class:"p-4 bg-gray-50 border border-gray-200 rounded-xl"},He={key:6,class:"p-4 bg-orange-50 border border-orange-200 rounded-xl"},Ke={class:"p-6 bg-gradient-to-r from-green-50 to-blue-50 rounded-xl border border-green-200"},Ge={key:0,class:"text-center"},Qe={class:"text-xl font-bold text-blue-600 mb-2"},We={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center"},Xe={class:"text-xl font-bold text-green-600"},Ye={class:"text-xl font-bold text-red-600"},Ze={class:"text-xl font-bold text-blue-600"},oa={class:"flex justify-end gap-3 pt-6 border-t"},ea=T({__name:"FuncionarioForm",props:{form:{},isEditing:{type:Boolean},showEmpresaSelect:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["submit","cancel","salvar-e-enviar"],setup(o,{emit:U}){const l=o,r=U,d=P("pessoais"),p=[{id:"pessoais",label:"Dados Pessoais",icon:"ðŸ‘¤"},{id:"profissionais",label:"Dados Profissionais",icon:"ðŸ’¼"},{id:"acesso",label:"Acesso ao Sistema",icon:"ðŸ”"},{id:"financeiros",label:"Dados Financeiros",icon:"ðŸ’°"},{id:"beneficios",label:"BenefÃ­cios e Descontos",icon:"ðŸŽ"}],m=[{value:"sem_desconto",label:"Sem Desconto"},{value:"percentual",label:"Percentual (%)"},{value:"valor_fixo",label:"Valor Fixo (R$)"}],c=[{value:"individual",label:"Individual"},{value:"familiar",label:"Familiar"},{value:"coparticipacao",label:"CoparticipaÃ§Ã£o"}],y=[{value:"diario",label:"Valor DiÃ¡rio"},{value:"mensal",label:"Valor Mensal"},{value:"fixo",label:"Valor Fixo"}];no();const{opcoesJornadas:k,carregarJornadas:C}=no(),{carregarEmpresas:h,obterOpcoesEmpresas:A}=Co(),{opcoesDepartamentos:S,carregarDepartamentos:R}=Wo(),{opcoesCargos:L,carregarCargos:H}=$o(),{nomeAdmin:b,idAdmin:v,buscarAdmin:j}=Po(),w=()=>{if(console.log("ðŸ”§ [FuncionarioForm] Inicializando benefÃ­cios..."),!l.form){console.error("âŒ [FuncionarioForm] ERRO: NÃ£o Ã© possÃ­vel inicializar benefÃ­cios - form Ã© null!");return}if(l.form.beneficios?console.log("âœ… [FuncionarioForm] BenefÃ­cios jÃ¡ existem"):(console.log("ðŸ“‹ [FuncionarioForm] Criando estrutura de benefÃ­cios"),l.form.beneficios=I({vale_transporte:{ativo:!1,valor:0,valor_mensal:0,tipo_desconto:"percentual",percentual_desconto:6,valor_desconto:0},cesta_basica:{ativo:!1,valor:0,valor_mensal:0,tipo_desconto:"sem_desconto",percentual_desconto:0,valor_desconto:0},plano_saude:{ativo:!1,plano:"individual",valor_empresa:0,valor_funcionario:0,dependentes:0},plano_odonto:{ativo:!1,valor_funcionario:0,dependentes:0},personalizados:[]})),!l.form.beneficios.personalizados)console.log("ðŸ“‹ [FuncionarioForm] Criando array de benefÃ­cios personalizados"),l.form.beneficios.personalizados=I([]);else if(ao(l.form.beneficios.personalizados))l.form.beneficios.personalizados.forEach(n=>{typeof n.valor=="string"&&(n.valor=parseFloat(n.valor)||0),typeof n.percentual_desconto=="string"&&(n.percentual_desconto=parseFloat(n.percentual_desconto)||0),typeof n.valor_desconto=="string"&&(n.valor_desconto=parseFloat(n.valor_desconto)||0)});else{console.log("ðŸ”„ [FuncionarioForm] Tornando benefÃ­cios personalizados reativos e convertendo tipos");const n=l.form.beneficios.personalizados.map(e=>({...e,valor:typeof e.valor=="string"?parseFloat(e.valor)||0:e.valor,percentual_desconto:typeof e.percentual_desconto=="string"?parseFloat(e.percentual_desconto)||0:e.percentual_desconto,valor_desconto:typeof e.valor_desconto=="string"?parseFloat(e.valor_desconto)||0:e.valor_desconto}));l.form.beneficios.personalizados=I(n)}l.form.descontos_personalizados?ao(l.form.descontos_personalizados)||(console.log("ðŸ”„ [FuncionarioForm] Tornando descontos personalizados reativos"),l.form.descontos_personalizados=I([...l.form.descontos_personalizados])):(console.log("ðŸ“‰ [FuncionarioForm] Criando array de descontos personalizados"),l.form.descontos_personalizados=I([])),console.log("âœ… [FuncionarioForm] BenefÃ­cios inicializados:",{beneficiosExist:!!l.form.beneficios,valeTransporte:!!l.form.beneficios?.vale_transporte,cestaBasica:!!l.form.beneficios?.cesta_basica,personalizadosCount:l.form.beneficios?.personalizados?.length||0})},W=()=>{l.form.responsavel_id||(l.form.responsavel_id=1,console.log("ðŸ‘©â€ðŸ’¼ Silvana definida como responsÃ¡vel padrÃ£o (ID: 1)"))};to(async()=>{if(console.log("ðŸš€ [FuncionarioForm] Montando componente"),console.log("ðŸ“‹ [FuncionarioForm] Props recebidas:",{isEditing:l.isEditing,showEmpresaSelect:l.showEmpresaSelect,loading:l.loading,formExists:!!l.form,formKeys:l.form?Object.keys(l.form):"null"}),!l.form){console.error("âŒ [FuncionarioForm] ERRO: Form Ã© null/undefined!");return}console.log("ðŸ“ [FuncionarioForm] Dados do form:",{nome:l.form.nome_completo,cpf:l.form.cpf,email:l.form.email_login,beneficios:l.form.beneficios?"Existe":"Null",beneficiosKeys:l.form.beneficios?Object.keys(l.form.beneficios):"null"});try{console.log("ðŸ”§ [FuncionarioForm] Inicializando benefÃ­cios..."),w(),console.log("ðŸ‘©â€ðŸ’¼ [FuncionarioForm] Definindo responsÃ¡vel padrÃ£o..."),W(),console.log("ðŸ“¡ [FuncionarioForm] Carregando dados das APIs..."),await Promise.all([C().catch(n=>console.error("âŒ Erro jornadas:",n)),h().catch(n=>console.error("âŒ Erro empresas:",n)),R().catch(n=>console.error("âŒ Erro departamentos:",n)),H().catch(n=>console.error("âŒ Erro cargos:",n)),j().catch(n=>console.error("âŒ Erro admin:",n))]),console.log("âœ… [FuncionarioForm] Componente montado com sucesso")}catch(n){console.error("âŒ [FuncionarioForm] Erro durante montagem:",n)}}),K(()=>l.form,(n,e)=>{console.log("ðŸ‘€ [FuncionarioForm] Watch form disparado:",{novoFormExists:!!n,formAnteriorExists:!!e,novoFormKeys:n?Object.keys(n):"null",beneficiosExists:n?.beneficios?"Sim":"NÃ£o"}),n&&!n.beneficios?(console.log("âš ï¸ [FuncionarioForm] BenefÃ­cios nÃ£o encontrados no watch, inicializando..."),w()):n?.beneficios&&console.log("âœ… [FuncionarioForm] BenefÃ­cios jÃ¡ existem no form")},{deep:!0,immediate:!0}),K(()=>l.form.beneficios?.personalizados,(n,e)=>{n&&n.length>0&&(console.log("ðŸ” BenefÃ­cios personalizados alterados:",n),n.forEach((f,F)=>{po(f),console.log(`BenefÃ­cio ${F}:`,{nome:f.nome,tipo_valor:f.tipo_valor,valor:f.valor,valor_tipo:typeof f.valor,ativo:f.ativo})}))},{deep:!0}),K(()=>l.form.tipo_contrato,(n,e)=>{n==="PJ"&&e!=="PJ"&&(console.log("ðŸš« FuncionÃ¡rio alterado para PJ - removendo descontos em folha"),l.form.beneficios&&(l.form.beneficios.vale_transporte&&(l.form.beneficios.vale_transporte.tipo_desconto="sem_desconto",l.form.beneficios.vale_transporte.percentual_desconto=0,l.form.beneficios.vale_transporte.valor_desconto=0),l.form.beneficios.cesta_basica&&(l.form.beneficios.cesta_basica.tipo_desconto="sem_desconto",l.form.beneficios.cesta_basica.percentual_desconto=0,l.form.beneficios.cesta_basica.valor_desconto=0),l.form.beneficios.plano_saude&&(l.form.beneficios.plano_saude.valor_funcionario=0),l.form.beneficios.plano_odonto&&(l.form.beneficios.plano_odonto.valor_funcionario=0),l.form.beneficios.personalizados&&l.form.beneficios.personalizados.forEach(f=>{f.tipo_desconto="sem_desconto",f.percentual_desconto=0,f.valor_desconto=0})),l.form.descontos_personalizados&&l.form.descontos_personalizados.splice(0),console.log("âœ… Descontos removidos para funcionÃ¡rio PJ"))}),K(()=>l.form.nome_completo,async(n,e)=>{(n&&!e||!n&&e)&&(console.log("ðŸ”„ Recarregando dados dos selects..."),await Promise.all([C(),h(),R(),H()]))});const X=O(()=>S.value),Y=O(()=>L.value),D=O(()=>{const n=[];return n.push({value:1,label:"Silvana (ResponsÃ¡vel PadrÃ£o) â­"}),v.value&&b.value&&v.value!==1&&n.push({value:v.value,label:`${b.value} (Admin)`}),n.push({value:null,label:"Nenhum responsÃ¡vel"}),n}),io=O(()=>A.value),ro=O(()=>k.value),co=()=>{l.form.descontos_personalizados.push({descricao:"",tipo:"valor_fixo",valor:0,percentual:0,recorrente:!0,parcelas:1})},mo=n=>{l.form.descontos_personalizados&&l.form.descontos_personalizados.splice(n,1)},uo=()=>{l.form.beneficios.personalizados||(l.form.beneficios.personalizados=I([])),l.form.beneficios.personalizados.push({icone:"ðŸŽ¯",nome:"",ativo:!1,valor:0,tipo_valor:"mensal",tipo_desconto:"sem_desconto",percentual_desconto:0,valor_desconto:0,descricao:""})},fo=n=>{l.form.beneficios.personalizados&&l.form.beneficios.personalizados.splice(n,1)},po=n=>{typeof n.valor=="string"&&(n.valor=parseFloat(n.valor)||0),typeof n.percentual_desconto=="string"&&(n.percentual_desconto=parseFloat(n.percentual_desconto)||0),typeof n.valor_desconto=="string"&&(n.valor_desconto=parseFloat(n.valor_desconto)||0)},Z=()=>{let n=0;if(l.form.beneficios?.vale_transporte?.ativo){const e=l.form.beneficios.vale_transporte.valor_mensal||(l.form.beneficios.vale_transporte.valor||0)*22;n+=e}if(l.form.beneficios?.cesta_basica?.ativo){const e=l.form.beneficios.cesta_basica.valor_mensal||(l.form.beneficios.cesta_basica.valor||0)*22;n+=e}return l.form.beneficios?.plano_saude?.ativo&&(n+=l.form.beneficios.plano_saude.valor_empresa||0),l.form.beneficios?.personalizados&&l.form.beneficios.personalizados.forEach(e=>{if(e.ativo){let f=e.valor||0;e.tipo_valor==="diario"&&(f=f*22),n+=f}}),n},eo=()=>{let n=0;const e=parseFloat(l.form.salario_base)||0;if(l.form.tipo_contrato==="PJ")return 0;if(l.form.beneficios?.vale_transporte?.ativo){const f=l.form.beneficios.vale_transporte;f.tipo_desconto==="percentual"?n+=e*(f.percentual_desconto||0)/100:f.tipo_desconto==="valor_fixo"&&(n+=f.valor_desconto||0)}if(l.form.beneficios?.cesta_basica?.ativo){const f=l.form.beneficios.cesta_basica;f.tipo_desconto==="percentual"?n+=e*(f.percentual_desconto||0)/100:f.tipo_desconto==="valor_fixo"&&(n+=f.valor_desconto||0)}return l.form.beneficios?.plano_saude?.ativo&&(n+=l.form.beneficios.plano_saude.valor_funcionario||0),l.form.beneficios?.plano_odonto?.ativo&&(n+=l.form.beneficios.plano_odonto.valor_funcionario||0),l.form.beneficios?.personalizados&&l.form.beneficios.personalizados.forEach(f=>{f.ativo&&(f.tipo_desconto==="percentual"?n+=e*(f.percentual_desconto||0)/100:f.tipo_desconto==="valor_fixo"&&(n+=f.valor_desconto||0))}),l.form.descontos_personalizados?.forEach(f=>{f.tipo==="percentual"?n+=e*(f.percentual||0)/100:f.tipo==="valor_fixo"&&(n+=f.valor||0)}),n},vo=()=>Z()-eo(),bo=()=>{r("submit")},go=()=>{r("salvar-e-enviar")};return(n,e)=>{const f=zo,F=M,J=q,B=oo;return i(),u("div",Xo,[a("div",Yo,[a("nav",Zo,[(i(),u(G,null,Q(p,s=>a("button",{key:s.id,onClick:N=>d.value=s.id,class:yo(["py-2 px-1 border-b-2 font-medium text-sm transition-colors",V(d)===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},E(s.icon)+" "+E(s.label),11,oe)),64))])]),a("div",ee,[V(d)==="pessoais"?(i(),$(Oo,{key:0,form:o.form},null,8,["form"])):_("",!0),V(d)==="profissionais"?(i(),$(No,{key:1,form:o.form,"show-empresa-select":o.showEmpresaSelect,"empresas-options":V(io),"departamentos-options":V(X),"cargos-options":V(Y),"jornada-options-computed":V(ro),"responsavel-options":V(D)},null,8,["form","show-empresa-select","empresas-options","departamentos-options","cargos-options","jornada-options-computed","responsavel-options"])):_("",!0),V(d)==="acesso"?(i(),$(qo,{key:2,form:o.form},null,8,["form"])):_("",!0),V(d)==="financeiros"?(i(),$(Qo,{key:3,form:o.form},null,8,["form"])):_("",!0),V(d)==="beneficios"?(i(),u("div",ae,[e[51]||(e[51]=a("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸŽ BenefÃ­cios e Descontos",-1)),o.form.tipo_contrato==="PJ"?(i(),u("div",le,[...e[19]||(e[19]=[a("div",{class:"flex items-center gap-2 text-yellow-700"},[a("span",{class:"text-xl"},"âš ï¸"),a("div",null,[a("h4",{class:"font-semibold"},"FuncionÃ¡rio PJ - Sem Descontos em Folha"),a("p",{class:"text-sm"},"FuncionÃ¡rios PJ nÃ£o podem ter descontos em folha de pagamento. Apenas benefÃ­cios sem desconto sÃ£o permitidos.")])],-1)])])):_("",!0),o.form.beneficios?(i(),u("div",ne,[e[28]||(e[28]=a("h4",{class:"text-md font-semibold text-gray-700 mb-3"},"ðŸ“‹ BenefÃ­cios PadrÃ£o",-1)),a("div",se,[o.form.beneficios.vale_transporte?(i(),u("div",te,[a("div",ie,[e[20]||(e[20]=a("div",{class:"flex items-center gap-2"},[a("span",{class:"text-2xl"},"ðŸšŒ"),a("h5",{class:"font-semibold text-gray-800"},"Vale Transporte")],-1)),t(f,{modelValue:o.form.beneficios.vale_transporte.ativo,"onUpdate:modelValue":e[0]||(e[0]=s=>o.form.beneficios.vale_transporte.ativo=s),label:""},null,8,["modelValue"])]),o.form.beneficios.vale_transporte.ativo?(i(),u("div",re,[t(F,{modelValue:o.form.beneficios.vale_transporte.valor,"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.beneficios.vale_transporte.valor=s),type:"number",step:"0.01",label:"Valor DiÃ¡rio (R$)",placeholder:"0,00"},null,8,["modelValue"]),o.form.tipo_contrato!=="PJ"?(i(),u("div",de,[t(J,{modelValue:o.form.beneficios.vale_transporte.tipo_desconto,"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.beneficios.vale_transporte.tipo_desconto=s),options:m,label:"Tipo de Desconto"},null,8,["modelValue"]),o.form.beneficios.vale_transporte.tipo_desconto==="percentual"?(i(),$(F,{key:0,modelValue:o.form.beneficios.vale_transporte.percentual_desconto,"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.beneficios.vale_transporte.percentual_desconto=s),type:"number",step:"0.01",label:"% de Desconto",placeholder:"6.00"},null,8,["modelValue"])):_("",!0),o.form.beneficios.vale_transporte.tipo_desconto==="valor_fixo"?(i(),$(F,{key:1,modelValue:o.form.beneficios.vale_transporte.valor_desconto,"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.beneficios.vale_transporte.valor_desconto=s),type:"number",step:"0.01",label:"Valor do Desconto (R$)",placeholder:"0,00"},null,8,["modelValue"])):_("",!0)])):(i(),u("div",ce,[...e[21]||(e[21]=[a("p",{class:"text-sm text-blue-700"},[g(" ðŸ’¼ "),a("strong",null,"FuncionÃ¡rio PJ:"),g(" BenefÃ­cio sem desconto em folha ")],-1)])]))])):_("",!0)])):_("",!0),o.form.beneficios.cesta_basica?(i(),u("div",me,[a("div",ue,[e[22]||(e[22]=a("div",{class:"flex items-center gap-2"},[a("span",{class:"text-2xl"},"ðŸ›’"),a("h5",{class:"font-semibold text-gray-800"},"Cesta BÃ¡sica")],-1)),t(f,{modelValue:o.form.beneficios.cesta_basica.ativo,"onUpdate:modelValue":e[5]||(e[5]=s=>o.form.beneficios.cesta_basica.ativo=s),label:""},null,8,["modelValue"])]),o.form.beneficios.cesta_basica.ativo?(i(),u("div",fe,[t(F,{modelValue:o.form.beneficios.cesta_basica.valor,"onUpdate:modelValue":e[6]||(e[6]=s=>o.form.beneficios.cesta_basica.valor=s),type:"number",step:"0.01",label:"Valor DiÃ¡rio (R$)",placeholder:"0,00"},null,8,["modelValue"]),o.form.tipo_contrato!=="PJ"?(i(),u("div",pe,[t(J,{modelValue:o.form.beneficios.cesta_basica.tipo_desconto,"onUpdate:modelValue":e[7]||(e[7]=s=>o.form.beneficios.cesta_basica.tipo_desconto=s),options:m,label:"Tipo de Desconto"},null,8,["modelValue"]),o.form.beneficios.cesta_basica.tipo_desconto==="percentual"?(i(),$(F,{key:0,modelValue:o.form.beneficios.cesta_basica.percentual_desconto,"onUpdate:modelValue":e[8]||(e[8]=s=>o.form.beneficios.cesta_basica.percentual_desconto=s),type:"number",step:"0.01",label:"% de Desconto",placeholder:"20.00"},null,8,["modelValue"])):_("",!0),o.form.beneficios.cesta_basica.tipo_desconto==="valor_fixo"?(i(),$(F,{key:1,modelValue:o.form.beneficios.cesta_basica.valor_desconto,"onUpdate:modelValue":e[9]||(e[9]=s=>o.form.beneficios.cesta_basica.valor_desconto=s),type:"number",step:"0.01",label:"Valor do Desconto (R$)",placeholder:"0,00"},null,8,["modelValue"])):_("",!0)])):(i(),u("div",ve,[...e[23]||(e[23]=[a("p",{class:"text-sm text-blue-700"},[g(" ðŸ’¼ "),a("strong",null,"FuncionÃ¡rio PJ:"),g(" BenefÃ­cio sem desconto em folha ")],-1)])]))])):_("",!0)])):_("",!0),o.form.beneficios.plano_saude?(i(),u("div",be,[a("div",ge,[e[24]||(e[24]=a("div",{class:"flex items-center gap-2"},[a("span",{class:"text-2xl"},"ðŸ¥"),a("h5",{class:"font-semibold text-gray-800"},"Plano de SaÃºde")],-1)),t(f,{modelValue:o.form.beneficios.plano_saude.ativo,"onUpdate:modelValue":e[10]||(e[10]=s=>o.form.beneficios.plano_saude.ativo=s),label:""},null,8,["modelValue"])]),o.form.beneficios.plano_saude.ativo?(i(),u("div",xe,[t(J,{modelValue:o.form.beneficios.plano_saude.plano,"onUpdate:modelValue":e[11]||(e[11]=s=>o.form.beneficios.plano_saude.plano=s),options:c,label:"Tipo de Plano"},null,8,["modelValue"]),t(F,{modelValue:o.form.beneficios.plano_saude.valor_empresa,"onUpdate:modelValue":e[12]||(e[12]=s=>o.form.beneficios.plano_saude.valor_empresa=s),type:"number",step:"0.01",label:"Valor Pago pela Empresa (R$)",placeholder:"0,00"},null,8,["modelValue"]),o.form.tipo_contrato!=="PJ"?(i(),u("div",_e,[t(F,{modelValue:o.form.beneficios.plano_saude.valor_funcionario,"onUpdate:modelValue":e[13]||(e[13]=s=>o.form.beneficios.plano_saude.valor_funcionario=s),type:"number",step:"0.01",label:"Valor Descontado do FuncionÃ¡rio (R$)",placeholder:"0,00"},null,8,["modelValue"])])):(i(),u("div",Ve,[...e[25]||(e[25]=[a("p",{class:"text-sm text-blue-700"},[g(" ðŸ’¼ "),a("strong",null,"FuncionÃ¡rio PJ:"),g(" Sem desconto em folha para plano de saÃºde ")],-1)])])),t(F,{modelValue:o.form.beneficios.plano_saude.dependentes,"onUpdate:modelValue":e[14]||(e[14]=s=>o.form.beneficios.plano_saude.dependentes=s),type:"number",label:"NÃºmero de Dependentes",placeholder:"0"},null,8,["modelValue"])])):_("",!0)])):_("",!0),o.form.beneficios.plano_odonto?(i(),u("div",ye,[a("div",Fe,[e[26]||(e[26]=a("div",{class:"flex items-center gap-2"},[a("span",{class:"text-2xl"},"ðŸ¦·"),a("h5",{class:"font-semibold text-gray-800"},"Plano OdontolÃ³gico")],-1)),t(f,{modelValue:o.form.beneficios.plano_odonto.ativo,"onUpdate:modelValue":e[15]||(e[15]=s=>o.form.beneficios.plano_odonto.ativo=s),label:""},null,8,["modelValue"])]),o.form.beneficios.plano_odonto.ativo?(i(),u("div",Ue,[o.form.tipo_contrato!=="PJ"?(i(),u("div",Ee,[t(F,{modelValue:o.form.beneficios.plano_odonto.valor_funcionario,"onUpdate:modelValue":e[16]||(e[16]=s=>o.form.beneficios.plano_odonto.valor_funcionario=s),type:"number",step:"0.01",label:"Valor Descontado (R$)",placeholder:"0,00"},null,8,["modelValue"])])):(i(),u("div",ze,[...e[27]||(e[27]=[a("p",{class:"text-sm text-blue-700"},[g(" ðŸ’¼ "),a("strong",null,"FuncionÃ¡rio PJ:"),g(" Sem desconto em folha para plano odontolÃ³gico ")],-1)])])),t(F,{modelValue:o.form.beneficios.plano_odonto.dependentes,"onUpdate:modelValue":e[17]||(e[17]=s=>o.form.beneficios.plano_odonto.dependentes=s),type:"number",label:"NÃºmero de Dependentes",placeholder:"0"},null,8,["modelValue"])])):_("",!0)])):_("",!0)])])):(i(),u("div",ke,[a("div",{class:"flex items-center gap-2 text-red-700"},[e[31]||(e[31]=a("span",{class:"text-xl"},"âš ï¸",-1)),a("div",null,[e[29]||(e[29]=a("h4",{class:"font-semibold"},"BenefÃ­cios nÃ£o inicializados",-1)),e[30]||(e[30]=a("p",{class:"text-sm"},"Clique no botÃ£o abaixo para inicializar os benefÃ­cios.",-1)),a("button",{onClick:w,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700"}," ðŸ”§ Inicializar BenefÃ­cios ")])])])),o.form.beneficios?(i(),u("div",Ce,[a("div",$e,[e[33]||(e[33]=a("h4",{class:"text-md font-semibold text-gray-700 mb-3"},"âœ¨ BenefÃ­cios Personalizados",-1)),t(B,{variant:"secondary",size:"sm",onClick:uo},{default:z(()=>[...e[32]||(e[32]=[g(" âž• Adicionar BenefÃ­cio ",-1)])]),_:1})]),a("div",Pe,[(i(!0),u(G,null,Q(o.form.beneficios.personalizados,(s,N)=>(i(),u("div",{key:N,class:"p-4 border border-gray-200 rounded-xl"},[a("div",De,[a("div",we,[t(F,{modelValue:s.icone,"onUpdate:modelValue":x=>s.icone=x,label:"",placeholder:"ðŸŽ¯",class:"w-12 text-center text-xl"},null,8,["modelValue","onUpdate:modelValue"]),t(F,{modelValue:s.nome,"onUpdate:modelValue":x=>s.nome=x,label:"",placeholder:"Nome do benefÃ­cio",class:"font-semibold"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",Se,[t(f,{modelValue:s.ativo,"onUpdate:modelValue":x=>s.ativo=x,label:""},null,8,["modelValue","onUpdate:modelValue"]),t(B,{variant:"danger",size:"sm",onClick:x=>fo(Number(N))},{default:z(()=>[...e[34]||(e[34]=[g(" ðŸ—‘ï¸ ",-1)])]),_:1},8,["onClick"])])]),s.ativo?(i(),u("div",he,[a("div",Ae,[t(F,{modelValue:s.valor,"onUpdate:modelValue":x=>s.valor=x,type:"number",step:"0.01",label:"Valor do BenefÃ­cio (R$)",placeholder:"0,00"},null,8,["modelValue","onUpdate:modelValue"]),t(J,{modelValue:s.tipo_valor,"onUpdate:modelValue":x=>s.tipo_valor=x,options:y,label:"Tipo de Valor"},null,8,["modelValue","onUpdate:modelValue"])]),o.form.tipo_contrato!=="PJ"?(i(),u("div",Be,[t(J,{modelValue:s.tipo_desconto,"onUpdate:modelValue":x=>s.tipo_desconto=x,options:m,label:"Tipo de Desconto"},null,8,["modelValue","onUpdate:modelValue"]),s.tipo_desconto==="percentual"?(i(),$(F,{key:0,modelValue:s.percentual_desconto,"onUpdate:modelValue":x=>s.percentual_desconto=x,type:"number",step:"0.01",label:"% de Desconto",placeholder:"0,00"},null,8,["modelValue","onUpdate:modelValue"])):_("",!0),s.tipo_desconto==="valor_fixo"?(i(),$(F,{key:1,modelValue:s.valor_desconto,"onUpdate:modelValue":x=>s.valor_desconto=x,type:"number",step:"0.01",label:"Valor do Desconto (R$)",placeholder:"0,00"},null,8,["modelValue","onUpdate:modelValue"])):_("",!0)])):(i(),u("div",Oe,[...e[35]||(e[35]=[a("p",{class:"text-sm text-blue-700"},[g(" ðŸ’¼ "),a("strong",null,"FuncionÃ¡rio PJ:"),g(" BenefÃ­cio sem desconto em folha ")],-1)])])),t(F,{modelValue:s.descricao,"onUpdate:modelValue":x=>s.descricao=x,label:"DescriÃ§Ã£o (opcional)",placeholder:"Ex: AuxÃ­lio creche, seguro de vida, etc."},null,8,["modelValue","onUpdate:modelValue"])])):_("",!0)]))),128)),!o.form.beneficios.personalizados||o.form.beneficios.personalizados.length===0?(i(),u("div",Te,[...e[36]||(e[36]=[a("span",{class:"text-2xl"},"âœ¨",-1),a("p",{class:"mt-2"},"Nenhum benefÃ­cio personalizado adicionado",-1),a("p",{class:"text-sm"},'Clique em "Adicionar BenefÃ­cio" para criar um novo',-1)])])):_("",!0)])])):_("",!0),o.form.descontos_personalizados&&o.form.tipo_contrato!=="PJ"?(i(),u("div",Re,[a("div",je,[e[38]||(e[38]=a("h4",{class:"text-md font-semibold text-gray-700"},"ðŸ“‰ Descontos Personalizados",-1)),t(B,{variant:"secondary",size:"sm",onClick:co},{default:z(()=>[...e[37]||(e[37]=[g(" âž• Adicionar Desconto ",-1)])]),_:1})]),a("div",Je,[(i(!0),u(G,null,Q(o.form.descontos_personalizados,(s,N)=>(i(),u("div",{key:N,class:"p-4 border border-gray-200 rounded-xl"},[a("div",Ne,[t(F,{modelValue:s.descricao,"onUpdate:modelValue":x=>s.descricao=x,label:"DescriÃ§Ã£o",placeholder:"Ex: EmprÃ©stimo, Seguro de Vida"},null,8,["modelValue","onUpdate:modelValue"]),t(J,{modelValue:s.tipo,"onUpdate:modelValue":x=>s.tipo=x,options:m,label:"Tipo"},null,8,["modelValue","onUpdate:modelValue"]),s.tipo==="percentual"?(i(),$(F,{key:0,modelValue:s.percentual,"onUpdate:modelValue":x=>s.percentual=x,type:"number",step:"0.01",label:"Percentual (%)",placeholder:"0,00"},null,8,["modelValue","onUpdate:modelValue"])):_("",!0),s.tipo==="valor_fixo"?(i(),$(F,{key:1,modelValue:s.valor,"onUpdate:modelValue":x=>s.valor=x,type:"number",step:"0.01",label:"Valor (R$)",placeholder:"0,00"},null,8,["modelValue","onUpdate:modelValue"])):_("",!0),a("div",Ie,[t(B,{variant:"danger",size:"sm",onClick:x=>mo(Number(N))},{default:z(()=>[...e[39]||(e[39]=[g(" ðŸ—‘ï¸ Remover ",-1)])]),_:1},8,["onClick"])])]),a("div",Le,[t(f,{modelValue:s.recorrente,"onUpdate:modelValue":x=>s.recorrente=x,label:"Desconto recorrente"},null,8,["modelValue","onUpdate:modelValue"]),s.recorrente?_("",!0):(i(),$(F,{key:0,modelValue:s.parcelas,"onUpdate:modelValue":x=>s.parcelas=x,type:"number",label:"NÃºmero de parcelas",placeholder:"1",class:"w-32"},null,8,["modelValue","onUpdate:modelValue"]))])]))),128)),o.form.descontos_personalizados.length===0?(i(),u("div",Me,[...e[40]||(e[40]=[a("span",{class:"text-2xl"},"ðŸ“",-1),a("p",{class:"mt-2"},"Nenhum desconto personalizado adicionado",-1),a("p",{class:"text-sm"},'Clique em "Adicionar Desconto" para criar um novo',-1)])])):_("",!0)])])):o.form.tipo_contrato==="PJ"?(i(),u("div",qe,[...e[41]||(e[41]=[a("div",{class:"flex items-center gap-2 text-gray-600"},[a("span",{class:"text-xl"},"ðŸ’¼"),a("div",null,[a("h4",{class:"font-semibold"},"FuncionÃ¡rio PJ - Descontos NÃ£o AplicÃ¡veis"),a("p",{class:"text-sm"},"FuncionÃ¡rios PJ nÃ£o podem ter descontos personalizados em folha de pagamento.")])],-1)])])):(i(),u("div",He,[a("div",{class:"flex items-center gap-2 text-orange-700"},[e[44]||(e[44]=a("span",{class:"text-xl"},"âš ï¸",-1)),a("div",null,[e[42]||(e[42]=a("h4",{class:"font-semibold"},"Descontos personalizados nÃ£o inicializados",-1)),e[43]||(e[43]=a("p",{class:"text-sm"},"Clique no botÃ£o abaixo para inicializar os descontos.",-1)),a("button",{onClick:w,class:"mt-2 px-3 py-1 bg-orange-600 text-white rounded text-sm hover:bg-orange-700"}," ðŸ”§ Inicializar Descontos ")])])])),a("div",Ke,[e[50]||(e[50]=a("h4",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸ“Š Resumo dos BenefÃ­cios",-1)),o.form.tipo_contrato==="PJ"?(i(),u("div",Ge,[a("div",Qe," R$ "+E(Z().toFixed(2).replace(".",",")),1),e[45]||(e[45]=a("div",{class:"text-sm text-gray-600 mb-4"},"Total de BenefÃ­cios (Sem Descontos)",-1)),e[46]||(e[46]=a("div",{class:"p-3 bg-blue-100 rounded-lg"},[a("p",{class:"text-sm text-blue-700"},[g(" ðŸ’¼ "),a("strong",null,"FuncionÃ¡rio PJ:"),g(" Recebe benefÃ­cios integralmente, sem descontos em folha ")])],-1))])):(i(),u("div",We,[a("div",null,[a("div",Xe," R$ "+E(Z().toFixed(2).replace(".",",")),1),e[47]||(e[47]=a("div",{class:"text-sm text-gray-600"},"Total de BenefÃ­cios",-1))]),a("div",null,[a("div",Ye," R$ "+E(eo().toFixed(2).replace(".",",")),1),e[48]||(e[48]=a("div",{class:"text-sm text-gray-600"},"Total de Descontos",-1))]),a("div",null,[a("div",Ze," R$ "+E(vo().toFixed(2).replace(".",",")),1),e[49]||(e[49]=a("div",{class:"text-sm text-gray-600"},"Impacto no SalÃ¡rio",-1))])]))])])):_("",!0)]),a("div",oa,[t(B,{variant:"secondary",onClick:e[18]||(e[18]=s=>n.$emit("cancel"))},{default:z(()=>[...e[52]||(e[52]=[g(" Cancelar ",-1)])]),_:1}),t(B,{variant:"success",onClick:go,disabled:o.loading},{default:z(()=>[...e[53]||(e[53]=[g(" ðŸ’¾ Salvar e Enviar Acesso ",-1)])]),_:1},8,["disabled"]),t(B,{onClick:bo,disabled:o.loading},{default:z(()=>[g(" ðŸ’¾ "+E(o.isEditing?"Atualizar":"Salvar")+" FuncionÃ¡rio ",1)]),_:1},8,["disabled"])])])}}}),aa=Object.assign(ea,{__name:"FuncionariosFuncionarioForm"}),la={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},na={class:"flex items-center gap-4"},sa={class:"text-xl font-bold text-gray-800"},ta={class:"text-lg text-gray-600"},ia={class:"text-gray-500"},ra={class:"text-sm text-gray-400"},da={class:"text-sm text-gray-400"},ca={class:"mt-1 p-2 bg-blue-50 rounded-lg border border-blue-200"},ma={class:"text-sm text-blue-700"},ua={key:0,class:"text-blue-600"},fa={class:"mt-2 p-2 bg-green-50 rounded-lg border border-green-200"},pa={class:"text-lg font-bold text-green-700"},va={class:"flex gap-2 mt-2"},ba={class:"flex gap-2"},ga=T({__name:"FuncionarioCard",props:{funcionario:{}},emits:["edit","toggle-status","email-enviado","email-erro"],setup(o,{emit:U}){const l=o,r=U,d=P(!1),p=()=>{Fo("/admin/holerites")},m=async()=>{if(!d.value){d.value=!0;try{console.log("ðŸ“§ Enviando credenciais para funcionÃ¡rio ID:",l.funcionario.id),await $fetch("/api/funcionarios/enviar-acesso",{method:"POST",body:{funcionario_id:l.funcionario.id}}),r("email-enviado",`Credenciais enviadas com sucesso para ${l.funcionario.email_login}!`)}catch(k){console.error("âŒ Erro ao enviar credenciais:",k),r("email-erro",k.data?.message||"Erro ao enviar credenciais. Verifique se o funcionÃ¡rio possui email cadastrado.")}finally{d.value=!1}}},c=k=>k?new Date(k).toLocaleDateString("pt-BR"):"",y=k=>k?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(k):"R$ 0,00";return(k,C)=>{const h=Do,A=wo,S=oo,R=so;return i(),$(R,{padding:"p-6"},{default:z(()=>[a("div",la,[a("div",na,[t(h,{name:o.funcionario.nome_completo,"avatar-type":o.funcionario.avatar,size:"lg"},null,8,["name","avatar-type"]),a("div",null,[a("h3",sa,E(o.funcionario.nome_completo),1),a("p",ta,E(o.funcionario.cargo)+" - "+E(o.funcionario.departamento),1),a("p",ia,E(o.funcionario.email_login),1),a("p",ra,"CPF: "+E(o.funcionario.cpf),1),a("p",da,"AdmissÃ£o: "+E(c(o.funcionario.data_admissao)),1),a("div",ca,[a("p",ma,[C[2]||(C[2]=g(" ðŸ‘¤ ",-1)),C[3]||(C[3]=a("strong",null,"Cadastrado por:",-1)),g(" "+E(o.funcionario.responsavel_cadastro_nome)+" ",1),o.funcionario.responsavel_cadastro_email?(i(),u("span",ua," ("+E(o.funcionario.responsavel_cadastro_email)+") ",1)):_("",!0)])]),a("div",fa,[a("p",pa," ðŸ’° SalÃ¡rio: "+E(y(o.funcionario.salario_base)),1)]),a("div",va,[t(A,{variant:o.funcionario.status==="ativo"?"success":"gray"},{default:z(()=>[g(E(o.funcionario.status==="ativo"?"Ativo":"Inativo"),1)]),_:1},8,["variant"]),t(A,{variant:o.funcionario.tipo_acesso==="admin"?"warning":"info"},{default:z(()=>[g(E(o.funcionario.tipo_acesso==="admin"?"Administrador":"FuncionÃ¡rio"),1)]),_:1},8,["variant"]),t(A,{variant:"gray"},{default:z(()=>[g(E(o.funcionario.telefone),1)]),_:1})])])]),a("div",ba,[t(S,{variant:"ghost",onClick:C[0]||(C[0]=L=>k.$emit("edit",o.funcionario))},{default:z(()=>[...C[4]||(C[4]=[g(" âœï¸ Editar ",-1)])]),_:1}),t(S,{variant:"ghost",onClick:p},{default:z(()=>[...C[5]||(C[5]=[g(" ðŸ“„ Holerites ",-1)])]),_:1}),t(S,{variant:"ghost",onClick:m,disabled:V(d)},{default:z(()=>[g(E(V(d)?"ðŸ“§ Enviando...":"ðŸ”‘ Login"),1)]),_:1},8,["disabled"]),t(S,{variant:o.funcionario.status==="ativo"?"danger":"success",onClick:C[1]||(C[1]=L=>k.$emit("toggle-status",o.funcionario))},{default:z(()=>[g(E(o.funcionario.status==="ativo"?"ðŸš« Inativar":"âœ“ Ativar"),1)]),_:1},8,["variant"])])])]),_:1})}}}),xa=Object.assign(ga,{__name:"FuncionariosFuncionarioCard"}),_a={class:"relative"},Va={class:"space-y-4"},Oa=T({__name:"funcionarios",setup(o){const U=P(""),l=P(!1),r=P(null),d=P(!1),p=P(!1),m=P({title:"",message:"",variant:"success"}),c=P({nome_completo:"",cpf:"",rg:"",pis_pasep:"",data_nascimento:"",sexo:"",estado_civil:"",telefone:"",email_pessoal:"",contato_emergencia_nome:"",contato_emergencia_telefone:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",empresa_id:"",departamento_id:"",cargo_id:"",responsavel_id:1,tipo_contrato:"CLT",data_admissao:"",matricula:"",jornada_trabalho_id:"",email_login:"",senha:"",tipo_acesso:"funcionario",status:"ativo",salario_base:"",tipo_salario:"mensal",numero_dependentes:0,banco:"",agencia:"",conta:"",tipo_conta:"",forma_pagamento:"deposito",beneficios:{vale_transporte:{ativo:!1,valor:0,valor_mensal:0,tipo_desconto:"percentual",percentual_desconto:6,valor_desconto:0},cesta_basica:{ativo:!1,valor:0,valor_mensal:0,tipo_desconto:"sem_desconto",percentual_desconto:0,valor_desconto:0},plano_saude:{ativo:!1,plano:"individual",valor_empresa:0,valor_funcionario:0,dependentes:0},plano_odonto:{ativo:!1,valor_funcionario:0,dependentes:0},personalizados:[]},descontos_personalizados:[],observacoes_internas:""}),y=P([]),k=async()=>{try{const b=await $fetch("/api/funcionarios");b&&(y.value=b)}catch(b){console.error("Erro ao carregar funcionÃ¡rios:",b)}};to(()=>{k()});const C=O(()=>{if(!U.value)return y.value;const b=U.value.toLowerCase();return y.value.filter(v=>v.nome_completo.toLowerCase().includes(b)||v.cargo.toLowerCase().includes(b)||v.departamento.toLowerCase().includes(b)||v.email_login.toLowerCase().includes(b))}),h=async b=>{if(console.log("ðŸ” [Funcionarios] Abrindo modal:",{isEditing:!!b,funcionarioId:b?.id,funcionarioNome:b?.nome_completo}),b)try{console.log("ðŸ” [Funcionarios] Buscando dados completos do funcionÃ¡rio ID:",b.id);const v=await $fetch(`/api/funcionarios/${b.id}`);console.log("âœ… [Funcionarios] Dados completos recebidos:",{id:v.id,nome:v.nome_completo,beneficios:v.beneficios?"Existe":"Null",beneficiosType:typeof v.beneficios,keys:Object.keys(v)}),r.value=v;const w={...{vale_transporte:{ativo:!1,valor:0,valor_mensal:0,tipo_desconto:"percentual",percentual_desconto:6,valor_desconto:0},cesta_basica:{ativo:!1,valor:0,valor_mensal:0,tipo_desconto:"sem_desconto",percentual_desconto:0,valor_desconto:0},plano_saude:{ativo:!1,plano:"individual",valor_empresa:0,valor_funcionario:0,dependentes:0},plano_odonto:{ativo:!1,valor_funcionario:0,dependentes:0},personalizados:[]},...v.beneficios||{}};Array.isArray(w.personalizados)||(w.personalizados=[]),c.value={...v,beneficios:w,descontos_personalizados:Array.isArray(v.descontos_personalizados)?v.descontos_personalizados:[]},console.log("ðŸ“‹ [Funcionarios] Form atualizado:",{nome:c.value.nome_completo,cpf:c.value.cpf,email:c.value.email_login,beneficios:c.value.beneficios?"Estruturado":"Null",beneficiosKeys:c.value.beneficios?Object.keys(c.value.beneficios):"null"})}catch(v){console.error("âŒ [Funcionarios] Erro ao buscar funcionÃ¡rio:",v),m.value={title:"Erro!",message:"Erro ao carregar dados do funcionÃ¡rio",variant:"error"},p.value=!0;return}else console.log("âž• [Funcionarios] Criando novo funcionÃ¡rio"),r.value=null,c.value={nome_completo:"",cpf:"",rg:"",pis_pasep:"",data_nascimento:"",sexo:"",estado_civil:"",telefone:"",email_pessoal:"",contato_emergencia_nome:"",contato_emergencia_telefone:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",empresa_id:"",departamento_id:"",cargo_id:"",responsavel_id:1,tipo_contrato:"CLT",data_admissao:"",matricula:"",jornada_trabalho_id:"",email_login:"",senha:"",tipo_acesso:"funcionario",status:"ativo",salario_base:"",tipo_salario:"mensal",numero_dependentes:0,banco:"",agencia:"",conta:"",tipo_conta:"",forma_pagamento:"deposito",beneficios:{vale_transporte:{ativo:!1,valor:0,valor_mensal:0,tipo_desconto:"percentual",percentual_desconto:6,valor_desconto:0},cesta_basica:{ativo:!1,valor:0,valor_mensal:0,tipo_desconto:"sem_desconto",percentual_desconto:0,valor_desconto:0},plano_saude:{ativo:!1,plano:"individual",valor_empresa:0,valor_funcionario:0,dependentes:0},plano_odonto:{ativo:!1,valor_funcionario:0,dependentes:0},personalizados:[]},descontos_personalizados:[],observacoes_internas:""},console.log("ðŸ“ [Funcionarios] Form novo funcionÃ¡rio criado");console.log("ðŸš€ [Funcionarios] Abrindo modal..."),l.value=!0},A=async()=>{d.value=!0;try{if(!c.value.nome_completo||!c.value.cpf)throw new Error("Preencha o nome completo e CPF");r.value?await $fetch(`/api/funcionarios/${r.value.id}`,{method:"PATCH",body:c.value}):await $fetch("/api/funcionarios",{method:"POST",body:c.value}),m.value={title:"Sucesso!",message:`FuncionÃ¡rio ${r.value?"atualizado":"cadastrado"} com sucesso!`,variant:"success"},p.value=!0,l.value=!1,await k()}catch(b){console.error("Erro ao salvar:",b),m.value={title:"Erro!",message:b.message||"Erro ao salvar funcionÃ¡rio. Tente novamente.",variant:"error"},p.value=!0}finally{d.value=!1}},S=async()=>{d.value=!0;try{if(!c.value.nome_completo||!c.value.cpf)throw new Error("Preencha o nome completo e CPF");const v=(await $fetch("/api/funcionarios",{method:"POST",body:c.value}))?.data;if(!v||!v.id)throw new Error("FuncionÃ¡rio criado mas dados nÃ£o retornados");if(console.log("âœ… FuncionÃ¡rio criado:",v.id),c.value.email_login){console.log("ðŸ“§ Enviando email para:",c.value.email_login);try{await $fetch("/api/funcionarios/enviar-acesso",{method:"POST",body:{funcionario_id:v.id}}),m.value={title:"Sucesso!",message:`FuncionÃ¡rio cadastrado e email enviado para ${c.value.email_login}! âœ‰ï¸`,variant:"success"}}catch(j){console.warn("âš ï¸ FuncionÃ¡rio criado mas erro ao enviar email:",j),m.value={title:"AtenÃ§Ã£o!",message:`FuncionÃ¡rio cadastrado, mas nÃ£o foi possÃ­vel enviar o email para ${c.value.email_login}. Envie manualmente.`,variant:"warning"}}}else m.value={title:"Sucesso!",message:"FuncionÃ¡rio cadastrado! Configure o email de login para enviar acesso.",variant:"success"};p.value=!0,l.value=!1,await k()}catch(b){console.error("Erro ao salvar:",b),m.value={title:"Erro!",message:b.message||"Erro ao salvar funcionÃ¡rio.",variant:"error"},p.value=!0}finally{d.value=!1}},R=b=>{b.status=b.status==="ativo"?"inativo":"ativo",m.value={title:"Status Atualizado!",message:`FuncionÃ¡rio ${b.nome_completo} ${b.status==="ativo"?"ativado":"inativado"} com sucesso!`,variant:"success"},p.value=!0},L=b=>{m.value={title:"Email Enviado!",message:b,variant:"success"},p.value=!0},H=b=>{m.value={title:"Erro ao Enviar Email",message:b,variant:"error"},p.value=!0};return(b,v)=>{const j=oo,w=xo,W=so,X=_o,Y=Vo;return i(),u("div",null,[t(w,{title:"FuncionÃ¡rios",description:"Gerencie todos os colaboradores da empresa"},{default:z(()=>[t(j,{size:"lg",icon:"âž•",onClick:v[0]||(v[0]=D=>h())},{default:z(()=>[...v[5]||(v[5]=[g(" Novo FuncionÃ¡rio ",-1)])]),_:1})]),_:1}),t(W,{padding:"p-4",class:"mb-6"},{default:z(()=>[a("div",_a,[v[6]||(v[6]=a("svg",{class:"w-6 h-6 text-gray-400 absolute left-4 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),Uo(a("input",{"onUpdate:modelValue":v[1]||(v[1]=D=>lo(U)?U.value=D:null),type:"text",placeholder:"Buscar funcionÃ¡rio por nome, cargo ou departamento...",class:"w-full pl-14 pr-4 py-4 text-lg border-2 border-gray-200 rounded-xl focus:border-primary-500 outline-none"},null,512),[[Eo,V(U)]])])]),_:1}),a("div",Va,[(i(!0),u(G,null,Q(V(C),D=>(i(),$(xa,{key:D.id,funcionario:D,onEdit:h,onToggleStatus:R,onEmailEnviado:L,onEmailErro:H},null,8,["funcionario"]))),128))]),t(X,{modelValue:V(l),"onUpdate:modelValue":v[3]||(v[3]=D=>lo(l)?l.value=D:null),title:V(r)?"Editar FuncionÃ¡rio":"Novo FuncionÃ¡rio","max-width":"max-w-6xl","content-max-height":"calc(90vh - 120px)","close-on-backdrop":!1},{default:z(()=>[t(aa,{form:V(c),"is-editing":!!V(r),"show-empresa-select":!0,loading:V(d),onSubmit:A,onSalvarEEnviar:S,onCancel:v[2]||(v[2]=D=>l.value=!1)},null,8,["form","is-editing","loading"])]),_:1},8,["modelValue","title"]),t(Y,{show:V(p),title:V(m).title,message:V(m).message,variant:V(m).variant,onClose:v[4]||(v[4]=D=>p.value=!1)},null,8,["show","title","message","variant"])])}}});export{Oa as default};
