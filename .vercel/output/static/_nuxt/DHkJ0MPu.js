import{_ as Ve}from"./DKFfuTk7.js";import{_ as te}from"./DpIGa6J_.js";import{_ as se}from"./B9ORdSW3.js";import{_ as $e}from"./CEyuO6_n.js";import{_ as je}from"./Bbk0fRQu.js";import{_ as Se}from"./1mwErJ78.js";import{e as R,l as T,c as d,o as l,k as y,a as t,i as e,d as $,t as m,q as L,r as k,C as Ee,m as N,w as _,b as c,y as le,F as O,f as Pe,x as Ue}from"./BlCT4Jl9.js";import{_ as we}from"./BUmjikbw.js";import{_ as Ne}from"./DlV5lPLA.js";import{_ as Me}from"./CrqGUWOX.js";import{_ as De,a as Ie}from"./C0CVT-Gk.js";const Te=["for"],qe={key:0,class:"text-red-500"},Be={class:"relative"},ze=["id","value","placeholder","disabled","required"],Fe={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2"},Oe={key:0,class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Re={key:1,class:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le={class:"mt-1 space-y-1"},Ge={key:0,class:"text-xs text-gray-400"},He={key:1,class:"text-xs text-red-500"},Je={key:2,class:"text-xs text-green-600"},Xe=R({__name:"UiInputCPF",props:{modelValue:{},label:{},placeholder:{default:"000.000.000-00"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},hint:{},error:{}},emits:["update:modelValue"],setup(i,{emit:A}){const u=i,q=A,g=T(()=>`cpf-input-${Math.random().toString(36).substring(2,11)}`),C=T(()=>b(u.modelValue)),V=T(()=>{const S=u.modelValue.replace(/[^\d]/g,"");return S.length===11&&h(S)}),j=S=>{let n=S.target.value.replace(/[^\d]/g,"");n.length>11&&(n=n.substring(0,11)),q("update:modelValue",n)},U=()=>{};function b(S){const v=S.replace(/[^\d]/g,"");return v.length<=3?v:v.length<=6?v.replace(/^(\d{3})(\d+)/,"$1.$2"):v.length<=9?v.replace(/^(\d{3})(\d{3})(\d+)/,"$1.$2.$3"):v.replace(/^(\d{3})(\d{3})(\d{3})(\d+)/,"$1.$2.$3-$4")}function h(S){const v=S.replace(/[^\d]/g,"");if(v.length!==11||/^(\d)\1+$/.test(v))return!1;let n=0;for(let p=0;p<9;p++)n+=parseInt(v.charAt(p))*(10-p);let r=11-n%11;if(r>9&&(r=0),parseInt(v.charAt(9))!==r)return!1;n=0;for(let p=0;p<10;p++)n+=parseInt(v.charAt(p))*(11-p);let f=11-n%11;return f>9&&(f=0),parseInt(v.charAt(10))===f}return(S,v)=>(l(),d("div",null,[i.label?(l(),d("label",{key:0,for:e(g),class:"block text-sm font-medium text-gray-600 mb-1"},[$(m(i.label)+" ",1),i.required?(l(),d("span",qe,"*")):y("",!0)],8,Te)):y("",!0),t("div",Be,[t("input",{id:e(g),value:e(C),placeholder:i.placeholder,disabled:i.disabled,required:i.required,class:L(["w-full px-4 py-3 text-lg border-2 rounded-xl outline-none transition-colors",i.disabled?"border-gray-100 bg-gray-50 text-gray-500":"border-gray-200 focus:border-primary-500",i.error?"border-red-300":"",e(V)?"border-green-300":""]),onInput:j,onBlur:U},null,42,ze),i.modelValue&&!i.disabled?(l(),d("div",Fe,[e(V)?(l(),d("svg",Oe,[...v[0]||(v[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):i.modelValue.length>=11?(l(),d("svg",Re,[...v[1]||(v[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6m0 0l-6-6m6 6l-6 6"},null,-1)])])):y("",!0)])):y("",!0)]),t("div",Le,[i.hint&&!i.error?(l(),d("p",Ge,m(i.hint),1)):y("",!0),i.error?(l(),d("p",He,m(i.error),1)):y("",!0),e(V)&&!i.error?(l(),d("p",Je,"CPF vÃ¡lido")):y("",!0)])]))}}),Ye=Object.assign(Xe,{__name:"UiInputCPF"}),Ke=["for"],Qe={key:0,class:"text-red-500"},We=["id","value","placeholder","disabled","required"],Ze={class:"mt-1 space-y-1"},ea={key:0,class:"text-xs text-gray-400"},aa={key:1,class:"text-xs text-red-500"},oa=R({__name:"UiInputPhone",props:{modelValue:{},label:{},placeholder:{default:"(11) 99999-9999"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},hint:{},error:{}},emits:["update:modelValue"],setup(i,{emit:A}){const u=i,q=A,g=T(()=>`phone-input-${Math.random().toString(36).substring(2,11)}`),C=T(()=>j(u.modelValue)),V=U=>{let h=U.target.value.replace(/[^\d]/g,"");h.length>11&&(h=h.substring(0,11)),q("update:modelValue",h)};function j(U){const b=U.replace(/[^\d]/g,"");return b.length<=2?b:b.length<=6?b.replace(/^(\d{2})(\d+)/,"($1) $2"):b.length<=10?b.replace(/^(\d{2})(\d{4})(\d+)/,"($1) $2-$3"):b.replace(/^(\d{2})(\d{5})(\d+)/,"($1) $2-$3")}return(U,b)=>(l(),d("div",null,[i.label?(l(),d("label",{key:0,for:e(g),class:"block text-sm font-medium text-gray-600 mb-1"},[$(m(i.label)+" ",1),i.required?(l(),d("span",Qe,"*")):y("",!0)],8,Ke)):y("",!0),t("input",{id:e(g),value:e(C),placeholder:i.placeholder,disabled:i.disabled,required:i.required,class:L(["w-full px-4 py-3 text-lg border-2 rounded-xl outline-none transition-colors",i.disabled?"border-gray-100 bg-gray-50 text-gray-500":"border-gray-200 focus:border-primary-500",i.error?"border-red-300":""]),onInput:V},null,42,We),t("div",Ze,[i.hint&&!i.error?(l(),d("p",ea,m(i.hint),1)):y("",!0),i.error?(l(),d("p",aa,m(i.error),1)):y("",!0)])]))}}),ta=Object.assign(oa,{__name:"UiInputPhone"}),sa={class:"space-y-6"},la={class:"text-center"},ra={class:"text-sm text-gray-500"},na={class:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-4 max-h-96 overflow-y-auto"},ia=["onClick"],da={class:"text-4xl"},ua={class:"text-xs text-gray-600 mt-1"},ma={class:"flex justify-end gap-3 pt-4 border-t"},ca=R({__name:"UiAvatarSelector",props:{show:{type:Boolean},userName:{},currentAvatar:{}},emits:["close","save"],setup(i,{emit:A}){const u=i,q=A,g=k(u.currentAvatar||"person-1"),C=k(!1),V=[{id:"person-1",name:"Pessoa PadrÃ£o",emoji:"ðŸ‘¤"},{id:"gerente-1",name:"Gerente",emoji:"ðŸ‘¨â€ðŸ’¼"},{id:"gerente-2",name:"Gerente",emoji:"ðŸ‘©â€ðŸ’¼"},{id:"gerente-3",name:"Gerente Moreno",emoji:"ðŸ‘¨ðŸ½â€ðŸ’¼"},{id:"gerente-4",name:"Gerente Morena",emoji:"ðŸ‘©ðŸ½â€ðŸ’¼"},{id:"ass-comercial-1",name:"Assistente Comercial",emoji:"ðŸ§‘â€ðŸ’¼"},{id:"ass-comercial-2",name:"Assistente Comercial",emoji:"ðŸ‘¨â€ðŸ’¼"},{id:"ass-comercial-3",name:"Assistente Comercial",emoji:"ðŸ‘©â€ðŸ’¼"},{id:"ass-comercial-4",name:"Assistente Comercial Moreno",emoji:"ðŸ‘¨ðŸ½â€ðŸ’¼"},{id:"ass-comercial-5",name:"Assistente Comercial Morena",emoji:"ðŸ‘©ðŸ½â€ðŸ’¼"},{id:"rep-comercial-1",name:"Representante Comercial",emoji:"ðŸ¤"},{id:"rep-comercial-2",name:"Representante Comercial",emoji:"ðŸ‘”"},{id:"rep-comercial-3",name:"Representante Comercial",emoji:"ðŸ’¼"},{id:"aux-comercial-1",name:"Auxiliar Comercial",emoji:"ðŸ“Š"},{id:"aux-comercial-2",name:"Auxiliar Comercial",emoji:"ðŸ“ˆ"},{id:"aux-comercial-3",name:"Auxiliar Comercial",emoji:"ðŸ’¹"},{id:"ass-producao-1",name:"Assistente de ProduÃ§Ã£o",emoji:"ðŸ‘·â€â™‚ï¸"},{id:"ass-producao-2",name:"Assistente de ProduÃ§Ã£o",emoji:"ðŸ‘·â€â™€ï¸"},{id:"ass-producao-3",name:"Assistente de ProduÃ§Ã£o Moreno",emoji:"ðŸ‘·ðŸ½â€â™‚ï¸"},{id:"ass-producao-4",name:"Assistente de ProduÃ§Ã£o Morena",emoji:"ðŸ‘·ðŸ½â€â™€ï¸"},{id:"aux-producao-1",name:"Auxiliar de ProduÃ§Ã£o",emoji:"ðŸ”§"},{id:"aux-producao-2",name:"Auxiliar de ProduÃ§Ã£o",emoji:"âš™ï¸"},{id:"aux-producao-3",name:"Auxiliar de ProduÃ§Ã£o",emoji:"ðŸ› ï¸"},{id:"soldador-1",name:"Soldador",emoji:"ðŸ‘¨â€ðŸ”§"},{id:"soldador-2",name:"Soldador",emoji:"ðŸ‘©â€ðŸ”§"},{id:"soldador-3",name:"Soldador Moreno",emoji:"ðŸ‘¨ðŸ½â€ðŸ”§"},{id:"soldador-4",name:"Soldador Morena",emoji:"ðŸ‘©ðŸ½â€ðŸ”§"},{id:"soldador-5",name:"Soldador",emoji:"ðŸ”¥"},{id:"soldador-6",name:"Soldador",emoji:"âš¡"},{id:"aux-admin-1",name:"Auxiliar Administrativo",emoji:"ðŸ“‹"},{id:"aux-admin-2",name:"Auxiliar Administrativo",emoji:"ðŸ“"},{id:"aux-admin-3",name:"Auxiliar Administrativo",emoji:"ðŸ—‚ï¸"},{id:"aux-admin-4",name:"Auxiliar Administrativo",emoji:"ðŸ“„"},{id:"lider-estoque-1",name:"LÃ­der de Estoque",emoji:"ðŸ“¦"},{id:"lider-estoque-2",name:"LÃ­der de Estoque",emoji:"ðŸª"},{id:"lider-estoque-3",name:"LÃ­der de Estoque Moreno",emoji:"ðŸ‘¨ðŸ½â€ðŸ’¼"},{id:"lider-estoque-4",name:"LÃ­der de Estoque Morena",emoji:"ðŸ‘©ðŸ½â€ðŸ’¼"},{id:"aux-estoque-1",name:"Auxiliar de Estoque",emoji:"ðŸ“‹"},{id:"aux-estoque-2",name:"Auxiliar de Estoque",emoji:"ðŸ“Š"},{id:"aux-estoque-3",name:"Auxiliar de Estoque",emoji:"ðŸ·ï¸"},{id:"aux-estoque-4",name:"Auxiliar de Estoque",emoji:"ðŸ“ˆ"},{id:"aux-expedicao-1",name:"Auxiliar de ExpediÃ§Ã£o",emoji:"ðŸšš"},{id:"aux-expedicao-2",name:"Auxiliar de ExpediÃ§Ã£o",emoji:"ðŸ“¦"},{id:"aux-expedicao-3",name:"Auxiliar de ExpediÃ§Ã£o",emoji:"ðŸš›"},{id:"aux-expedicao-4",name:"Auxiliar de ExpediÃ§Ã£o",emoji:"ðŸ“®"},{id:"aux-servicos-1",name:"Auxiliar de ServiÃ§os Gerais",emoji:"ðŸ§¹"},{id:"aux-servicos-2",name:"Auxiliar de ServiÃ§os Gerais",emoji:"ðŸ§½"},{id:"aux-servicos-3",name:"Auxiliar de ServiÃ§os Gerais",emoji:"ðŸ§´"},{id:"aux-servicos-4",name:"Auxiliar de ServiÃ§os Gerais",emoji:"ðŸ—‘ï¸"},{id:"ti-1",name:"TÃ©cnico de TI",emoji:"ðŸ‘¨â€ðŸ’»"},{id:"ti-2",name:"TÃ©cnico de TI",emoji:"ðŸ‘©â€ðŸ’»"},{id:"ti-3",name:"TÃ©cnico de TI Moreno",emoji:"ðŸ‘¨ðŸ½â€ðŸ’»"},{id:"ti-4",name:"TÃ©cnico de TI Morena",emoji:"ðŸ‘©ðŸ½â€ðŸ’»"},{id:"ti-5",name:"TÃ©cnico de TI",emoji:"ðŸ’»"},{id:"ti-6",name:"TÃ©cnico de TI",emoji:"ðŸ–¥ï¸"}],j=b=>{g.value=b},U=async()=>{C.value=!0;try{q("save",g.value)}finally{C.value=!1}};return Ee(()=>u.currentAvatar,b=>{b&&(g.value=b)}),(b,h)=>{const S=te,v=se,n=De;return l(),N(n,{"model-value":i.show,"onUpdate:modelValue":h[1]||(h[1]=r=>b.$emit("close")),title:"Escolher Avatar"},{default:_(()=>[t("div",sa,[t("div",la,[h[2]||(h[2]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Avatar Atual",-1)),c(S,{name:i.userName,"avatar-type":i.currentAvatar,size:"xl",class:"mx-auto mb-2"},null,8,["name","avatar-type"]),t("p",ra,m(i.userName),1)]),t("div",null,[h[3]||(h[3]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Escolha um Avatar",-1)),t("div",na,[(l(),d(O,null,le(V,r=>t("button",{key:r.id,onClick:f=>j(r.id),class:L(["p-2 rounded-xl border-2 transition-all hover:scale-105",e(g)===r.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"])},[t("div",da,m(r.emoji),1),t("p",ua,m(r.name),1)],10,ia)),64))])]),t("div",ma,[c(v,{variant:"ghost",onClick:h[0]||(h[0]=r=>b.$emit("close"))},{default:_(()=>[...h[4]||(h[4]=[$(" Cancelar ",-1)])]),_:1}),c(v,{onClick:U,disabled:e(C)},{default:_(()=>[$(m(e(C)?"Salvando...":"Salvar Avatar"),1)]),_:1},8,["disabled"])])])]),_:1},8,["model-value"])}}}),pa=Object.assign(ca,{__name:"UiAvatarSelector"}),va={key:0,class:"flex items-center justify-center py-12"},fa={key:1},ga={class:"flex flex-col md:flex-row items-start gap-6"},ba={class:"flex flex-col items-center"},xa={class:"flex-1 w-full"},_a={class:"text-2xl font-bold text-gray-800 mb-1"},ya={class:"text-lg text-gray-500 mb-4"},ha={class:"flex flex-wrap gap-3"},ka={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Aa={key:0,class:"mt-6 flex justify-end"},Ca={class:"flex items-center gap-2"},Va={key:0,class:"text-sm text-gray-500"},$a={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ja={key:0},Sa={class:"text-lg font-semibold text-gray-800 p-3 bg-gray-50 rounded-xl"},Ea={key:2},Pa={class:"text-lg font-semibold text-gray-800 p-3 bg-gray-50 rounded-xl"},Ua={key:4},wa={class:"text-lg font-semibold text-gray-800 p-3 bg-gray-50 rounded-xl"},Na={key:6},Ma={class:"text-lg font-semibold text-gray-800 p-3 bg-gray-50 rounded-xl"},Da={key:8},Ia={class:"text-lg font-semibold text-gray-800 p-3 bg-gray-50 rounded-xl"},Ta={key:2,class:"mt-6 flex justify-end"},qa={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ba={class:"flex items-center justify-between"},za={class:"text-lg font-bold text-green-700"},Fa={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},Oa={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},Ra={class:"text-xs text-gray-500 mt-1 flex items-center gap-1"},La={key:0,class:"mt-6 flex justify-end"},Ga={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ha={key:0},Ja={class:"p-3 bg-green-50 rounded-xl border border-green-200"},Xa={class:"text-lg font-semibold text-green-800"},Ya={key:1},Ka={class:"p-3 bg-blue-50 rounded-xl border border-blue-200"},Qa={class:"text-lg font-semibold text-blue-800"},Wa={key:2},Za={class:"p-3 bg-purple-50 rounded-xl border border-purple-200"},eo={class:"text-lg font-semibold text-purple-800"},ao={key:3},oo={class:"p-3 bg-indigo-50 rounded-xl border border-indigo-200"},to={class:"text-lg font-semibold text-indigo-800"},so={class:"block text-sm font-medium text-gray-500 mb-1"},lo={class:"p-3 bg-orange-50 rounded-xl border border-orange-200"},ro={class:"flex items-center gap-2 mb-1"},no={class:"text-lg"},io={class:"text-lg font-semibold text-orange-800"},uo={key:0,class:"text-xs text-gray-600 mt-1"},mo={key:4,class:"col-span-full"},Ao=R({__name:"meus-dados",setup(i){const{user:A,isAdmin:u,updateUser:q}=Pe(),g=k(!1),C=k(!1),V=k(!1),j=k(!1),U=k(!0),b=k(!1),h=k(!1),S=k(!1),v=k({title:"",message:"",variant:"success"}),n=k(null),r=k({nome:"",cpf:"",rg:"",dataNascimento:"",sexo:"",telefone:"",email_pessoal:"",pis_pasep:""}),f=k({cargo:"",departamento:"",dataAdmissao:"",tipoContrato:"",empresa:""}),p=k({salario_base:"",banco:"",agencia:"",conta:"",tipo_conta:"",forma_pagamento:"deposito",chave_pix:""}),P=k({sexo:!1,dataNascimento:!1,rg:!1,cpf:!1}),re=[{value:"001",label:"Banco do Brasil"},{value:"104",label:"Caixa EconÃ´mica"},{value:"237",label:"Bradesco"},{value:"341",label:"ItaÃº"},{value:"033",label:"Santander"},{value:"260",label:"Nubank"}],ne=[{value:"corrente",label:"Conta Corrente"},{value:"poupanca",label:"Conta PoupanÃ§a"}],ie=[{value:"masculino",label:"Masculino"},{value:"feminino",label:"Feminino"},{value:"outro",label:"Outro"},{value:"nao_informar",label:"Prefiro nÃ£o informar"}],de=[{value:"deposito",label:"DepÃ³sito em Conta"},{value:"pix",label:"PIX"},{value:"dinheiro",label:"Dinheiro"}],ue=[{value:"CLT",label:"CLT"},{value:"PJ",label:"PJ"},{value:"Estagio",label:"EstÃ¡gio"},{value:"Temporario",label:"TemporÃ¡rio"}],X=k([]),Y=k([]),K=k([]),G=k({}),Q=k({}),W=k({}),me=o=>o?new Date(o).toLocaleDateString("pt-BR"):"--",ce=()=>{if(!f.value.dataAdmissao)return"Desde --/--";try{const o=new Date(f.value.dataAdmissao+"T00:00:00");if(isNaN(o.getTime()))return"Desde --/--";const w=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][o.getMonth()],x=o.getFullYear();return`Desde ${w}/${x}`}catch(o){return console.error("Erro ao formatar data de contrataÃ§Ã£o:",o),"Desde --/--"}},z=o=>{const a=typeof o=="string"?parseFloat(o):o;return a?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a):"R$ 0,00"},Z=o=>{const a=o?.toString();return G.value[a]||a||"--"},ee=o=>{const a=o?.toString();return Q.value[a]||a||"--"},pe=o=>{const a=o?.toString();return W.value[a]||a||"--"},M=T(()=>{if(!n.value?.beneficios)return{};let o={};try{o=typeof n.value.beneficios=="string"?JSON.parse(n.value.beneficios):n.value.beneficios}catch(w){return console.error("Erro ao parsear benefÃ­cios:",w),{}}const a={};return o.vale_transporte?.ativo&&o.vale_transporte?.valor>0&&(a.vale_transporte=o.vale_transporte),o.cesta_basica?.ativo&&o.cesta_basica?.valor>0&&(a.cesta_basica=o.cesta_basica),o.plano_saude?.ativo&&o.plano_saude?.valor_funcionario>0&&(a.plano_saude=o.plano_saude),o.plano_odonto?.ativo&&o.plano_odonto?.valor_funcionario>0&&(a.plano_odonto=o.plano_odonto),a}),ae=T(()=>{if(!n.value?.beneficios)return[];let o={};try{o=typeof n.value.beneficios=="string"?JSON.parse(n.value.beneficios):n.value.beneficios}catch(a){return console.error("Erro ao parsear benefÃ­cios:",a),[]}return!o.personalizados||!Array.isArray(o.personalizados)?[]:o.personalizados.filter(a=>a.ativo&&a.valor>0)}),ve=T(()=>Object.keys(M.value).length>0||ae.value.length>0);Ue(async()=>{await fe(),await H()});const fe=async()=>{try{const o=await $fetch("/api/cargos");o.success&&o.data&&(X.value=o.data.map(x=>({value:x.id.toString(),label:x.nome})),o.data.forEach(x=>{G.value[x.id.toString()]=x.nome}));const a=await $fetch("/api/departamentos");a.success&&a.data&&(Y.value=a.data.map(x=>({value:x.id.toString(),label:x.nome})),a.data.forEach(x=>{Q.value[x.id.toString()]=x.nome}));const w=await $fetch("/api/empresas");w.success&&w.data&&(K.value=w.data.map(x=>({value:x.id.toString(),label:x.nome_fantasia||x.nome})),w.data.forEach(x=>{W.value[x.id.toString()]=x.nome_fantasia||x.nome}))}catch(o){console.error("Erro ao carregar opÃ§Ãµes:",o)}},H=async()=>{if(!A.value?.id){E("Erro!","UsuÃ¡rio nÃ£o autenticado","error");return}U.value=!0;try{const o=await $fetch(`/api/funcionarios/meus-dados?userId=${A.value.id}`);o.success&&o.data&&(n.value=o.data,r.value={nome:o.data.nome_completo||"",cpf:o.data.cpf||"",rg:o.data.rg||"",dataNascimento:o.data.data_nascimento||"",sexo:o.data.sexo||"",telefone:o.data.telefone||"",email_pessoal:o.data.email_pessoal||"",pis_pasep:o.data.pis_pasep||""},f.value={cargo:o.data.cargo_id?.toString()||"",departamento:o.data.departamento_id?.toString()||"",dataAdmissao:o.data.data_admissao||"",tipoContrato:o.data.tipo_contrato||"CLT",empresa:o.data.empresa_id?.toString()||""},p.value={salario_base:o.data.salario_base||0,banco:o.data.banco||"",agencia:o.data.agencia||"",conta:o.data.conta||"",tipo_conta:o.data.tipo_conta||"corrente",forma_pagamento:o.data.forma_pagamento||"deposito",chave_pix:o.data.chave_pix||""},P.value={sexo:!!o.data.sexo,dataNascimento:!!o.data.data_nascimento,rg:!!o.data.rg,cpf:!!o.data.cpf})}catch(o){console.error("Erro ao carregar dados:",o),E("Erro!","NÃ£o foi possÃ­vel carregar seus dados","error")}finally{U.value=!1}},ge=async()=>{if(!A.value?.id){E("Erro!","UsuÃ¡rio nÃ£o autenticado","error");return}j.value=!0;try{const o={userId:A.value.id,telefone:r.value.telefone,email_pessoal:r.value.email_pessoal,pis_pasep:r.value.pis_pasep};(!P.value.dataNascimento||u.value)&&(o.data_nascimento=r.value.dataNascimento),(!P.value.sexo||u.value)&&(o.sexo=r.value.sexo),(!P.value.rg||u.value)&&(o.rg=r.value.rg),u.value?(o.nome_completo=r.value.nome,o.cpf=r.value.cpf):P.value.cpf||(o.cpf=r.value.cpf);const a=await $fetch("/api/funcionarios/meus-dados",{method:"PATCH",body:o});a.success&&(a.data&&(r.value.telefone=a.data.telefone||r.value.telefone,r.value.email_pessoal=a.data.email_pessoal||r.value.email_pessoal,r.value.dataNascimento=a.data.data_nascimento||r.value.dataNascimento,u.value&&a.data.nome_completo&&(r.value.nome=a.data.nome_completo,q({nome:a.data.nome_completo})),u.value&&a.data.cpf&&(r.value.cpf=a.data.cpf),n.value&&(n.value.telefone=a.data.telefone||n.value.telefone,n.value.email_pessoal=a.data.email_pessoal||n.value.email_pessoal,n.value.data_nascimento=a.data.data_nascimento||n.value.data_nascimento,u.value&&a.data.nome_completo&&(n.value.nome_completo=a.data.nome_completo),u.value&&a.data.cpf&&(n.value.cpf=a.data.cpf))),E("Sucesso!","Dados pessoais atualizados com sucesso!","success"),g.value=!1)}catch(o){console.error("Erro ao salvar dados pessoais:",o),E("Erro!",o.data?.message||"NÃ£o foi possÃ­vel salvar os dados","error")}finally{j.value=!1}},be=async()=>{if(!A.value?.id){E("Erro!","UsuÃ¡rio nÃ£o autenticado","error");return}if(!u.value){E("Erro!","Apenas administradores podem editar dados profissionais","error");return}j.value=!0;try{(await $fetch("/api/funcionarios/meus-dados",{method:"PATCH",body:{userId:A.value.id,cargo_id:f.value.cargo,departamento_id:f.value.departamento,data_admissao:f.value.dataAdmissao,tipo_contrato:f.value.tipoContrato,empresa_id:f.value.empresa}})).success&&(E("Sucesso!","Dados profissionais atualizados com sucesso!","success"),C.value=!1,await H())}catch(o){console.error("Erro ao salvar dados profissionais:",o),E("Erro!",o.data?.message||"NÃ£o foi possÃ­vel salvar os dados","error")}finally{j.value=!1}},xe=async()=>{if(!A.value?.id){E("Erro!","UsuÃ¡rio nÃ£o autenticado","error");return}j.value=!0;try{(await $fetch("/api/funcionarios/meus-dados",{method:"PATCH",body:{userId:A.value.id,banco:p.value.banco,agencia:p.value.agencia,conta:p.value.conta,tipo_conta:p.value.tipo_conta,forma_pagamento:p.value.forma_pagamento,chave_pix:p.value.chave_pix}})).success&&(E("Sucesso!","Dados financeiros atualizados com sucesso!","success"),V.value=!1,await H())}catch(o){console.error("Erro ao salvar dados financeiros:",o),E("Erro!",o.data?.message||"NÃ£o foi possÃ­vel salvar os dados","error")}finally{j.value=!1}},E=(o,a,w)=>{v.value={title:o,message:a,variant:w},b.value=!0,setTimeout(()=>{b.value=!1},5e3)},_e=async o=>{if(!A.value?.id){E("Erro!","UsuÃ¡rio nÃ£o autenticado","error");return}try{(await $fetch("/api/funcionarios/meus-dados",{method:"PATCH",body:{userId:A.value.id,avatar:o}})).success&&(n.value&&(n.value.avatar=o),E("Sucesso!","Avatar atualizado com sucesso!","success"),h.value=!1)}catch(a){console.error("Erro ao salvar avatar:",a),E("Erro!",a.data?.message||"NÃ£o foi possÃ­vel salvar o avatar","error")}};return(o,a)=>{const w=Ve,x=te,B=se,oe=$e,F=je,D=Se,ye=Ye,I=we,he=ta,ke=Ne,J=Me,Ae=Ie,Ce=pa;return l(),d("div",null,[c(w,{title:"Meus Dados",description:"Visualize e atualize suas informaÃ§Ãµes pessoais"}),e(U)?(l(),d("div",va,[...a[26]||(a[26]=[t("div",{class:"text-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t("p",{class:"text-gray-600"},"Carregando seus dados...")],-1)])])):(l(),d("div",fa,[c(F,{class:"mb-6"},{default:_(()=>[t("div",ga,[t("div",ba,[c(x,{name:e(A)?.nome||"","avatar-type":e(n)?.avatar,size:"xl"},null,8,["name","avatar-type"]),c(B,{variant:"ghost",class:"mt-4",onClick:a[0]||(a[0]=s=>h.value=!0)},{default:_(()=>[...a[27]||(a[27]=[$(" ðŸ“· Alterar Foto ",-1)])]),_:1})]),t("div",xa,[t("h2",_a,m(e(n)?.nome_completo||e(A)?.nome),1),t("p",ya,[e(n)&&Object.keys(e(G)).length>0?(l(),d(O,{key:0},[$(m(Z(e(n).cargo_id))+" - "+m(ee(e(n).departamento_id)),1)],64)):(l(),d(O,{key:1},[$(" Carregando... ")],64))]),t("div",ha,[c(oe,{variant:"success"},{default:_(()=>[...a[28]||(a[28]=[$("âœ“ FuncionÃ¡rio Ativo",-1)])]),_:1}),c(oe,{variant:"info"},{default:_(()=>[$("ðŸ“… "+m(ce()),1)]),_:1})])])])]),_:1}),c(F,{title:"ðŸ‘¤ Dados Pessoais",class:"mb-6"},{header:_(()=>[c(B,{variant:"ghost",onClick:a[1]||(a[1]=s=>g.value=!e(g))},{default:_(()=>[$(m(e(g)?"âœ• Cancelar":"âœï¸ Editar"),1)]),_:1})]),default:_(()=>[t("div",ka,[c(D,{modelValue:e(r).nome,"onUpdate:modelValue":a[2]||(a[2]=s=>e(r).nome=s),label:"Nome Completo",disabled:!e(g)||!e(u),hint:e(u)?"":"Apenas administradores podem alterar o nome"},null,8,["modelValue","disabled","hint"]),c(ye,{modelValue:e(r).cpf,"onUpdate:modelValue":a[3]||(a[3]=s=>e(r).cpf=s),label:"CPF",disabled:!e(g)||!e(u)||e(P).cpf&&!e(u),hint:!e(u)&&e(P).cpf?"CPF jÃ¡ foi editado uma vez":e(u)?"":"Apenas administradores podem alterar o CPF"},null,8,["modelValue","disabled","hint"]),c(D,{modelValue:e(r).rg,"onUpdate:modelValue":a[4]||(a[4]=s=>e(r).rg=s),label:"RG",disabled:!e(g)||e(P).rg&&!e(u),hint:e(P).rg&&!e(u)?"RG jÃ¡ foi editado uma vez":""},null,8,["modelValue","disabled","hint"]),c(D,{modelValue:e(r).dataNascimento,"onUpdate:modelValue":a[5]||(a[5]=s=>e(r).dataNascimento=s),type:"date",label:"Data de Nascimento",disabled:!e(g)||e(P).dataNascimento&&!e(u),hint:e(P).dataNascimento&&!e(u)?"Data de nascimento jÃ¡ foi editada uma vez":""},null,8,["modelValue","disabled","hint"]),c(I,{modelValue:e(r).sexo,"onUpdate:modelValue":a[6]||(a[6]=s=>e(r).sexo=s),options:ie,label:"Sexo",disabled:!e(g)||e(P).sexo&&!e(u),hint:e(P).sexo&&!e(u)?"Sexo jÃ¡ foi editado uma vez":""},null,8,["modelValue","disabled","hint"]),c(he,{modelValue:e(r).telefone,"onUpdate:modelValue":a[7]||(a[7]=s=>e(r).telefone=s),label:"Telefone",disabled:!e(g)},null,8,["modelValue","disabled"]),c(D,{modelValue:e(r).email_pessoal,"onUpdate:modelValue":a[8]||(a[8]=s=>e(r).email_pessoal=s),type:"email",label:"Email Pessoal",disabled:!e(g)},null,8,["modelValue","disabled"]),c(ke,{modelValue:e(r).pis_pasep,"onUpdate:modelValue":a[9]||(a[9]=s=>e(r).pis_pasep=s),label:"PIS/PASEP",disabled:!e(g)},null,8,["modelValue","disabled"])]),e(g)?(l(),d("div",Aa,[c(B,{icon:"ðŸ’¾",onClick:ge,disabled:e(j)},{default:_(()=>[$(m(e(j)?"Salvando...":"Salvar AlteraÃ§Ãµes"),1)]),_:1},8,["disabled"])])):y("",!0)]),_:1}),c(F,{title:"ðŸ’¼ Dados Profissionais",class:"mb-6"},{header:_(()=>[t("div",Ca,[e(u)?y("",!0):(l(),d("span",Va,"(somente visualizaÃ§Ã£o)")),e(u)?(l(),N(B,{key:1,variant:"ghost",onClick:a[10]||(a[10]=s=>C.value=!e(C))},{default:_(()=>[$(m(e(C)?"âœ• Cancelar":"âœï¸ Editar"),1)]),_:1})):y("",!0)])]),default:_(()=>[e(u)?(l(),N(J,{key:1,variant:"info",class:"mb-6"},{default:_(()=>[...a[30]||(a[30]=[$(" Como administrador, vocÃª pode editar seus prÃ³prios dados profissionais. ",-1)])]),_:1})):(l(),N(J,{key:0,variant:"warning",class:"mb-6"},{default:_(()=>[...a[29]||(a[29]=[$(" Estes dados sÃ£o gerenciados pelo RH e nÃ£o podem ser alterados por vocÃª. ",-1)])]),_:1})),t("div",$a,[!e(u)||!e(C)?(l(),d("div",ja,[a[31]||(a[31]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Cargo",-1)),t("p",Sa,m(Z(e(n)?.cargo_id)||e(A)?.cargo||"--"),1)])):(l(),N(I,{key:1,modelValue:e(f).cargo,"onUpdate:modelValue":a[11]||(a[11]=s=>e(f).cargo=s),options:e(X),label:"Cargo",placeholder:"Selecione um cargo..."},null,8,["modelValue","options"])),!e(u)||!e(C)?(l(),d("div",Ea,[a[32]||(a[32]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Departamento",-1)),t("p",Pa,m(ee(e(n)?.departamento_id)||e(A)?.departamento||"--"),1)])):(l(),N(I,{key:3,modelValue:e(f).departamento,"onUpdate:modelValue":a[12]||(a[12]=s=>e(f).departamento=s),options:e(Y),label:"Departamento",placeholder:"Selecione um departamento..."},null,8,["modelValue","options"])),!e(u)||!e(C)?(l(),d("div",Ua,[a[33]||(a[33]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Data de AdmissÃ£o",-1)),t("p",wa,m(me(e(f).dataAdmissao)),1)])):(l(),N(D,{key:5,modelValue:e(f).dataAdmissao,"onUpdate:modelValue":a[13]||(a[13]=s=>e(f).dataAdmissao=s),type:"date",label:"Data de AdmissÃ£o"},null,8,["modelValue"])),!e(u)||!e(C)?(l(),d("div",Na,[a[34]||(a[34]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Tipo de Contrato",-1)),t("p",Ma,m(e(f).tipoContrato),1)])):(l(),N(I,{key:7,modelValue:e(f).tipoContrato,"onUpdate:modelValue":a[14]||(a[14]=s=>e(f).tipoContrato=s),options:ue,label:"Tipo de Contrato"},null,8,["modelValue"])),!e(u)||!e(C)?(l(),d("div",Da,[a[35]||(a[35]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Empresa",-1)),t("p",Ia,m(pe(e(n)?.empresa_id)||"--"),1)])):(l(),N(I,{key:9,modelValue:e(f).empresa,"onUpdate:modelValue":a[15]||(a[15]=s=>e(f).empresa=s),options:e(K),label:"Empresa",placeholder:"Selecione uma empresa..."},null,8,["modelValue","options"]))]),e(u)&&e(C)?(l(),d("div",Ta,[c(B,{icon:"ðŸ’¾",onClick:be,disabled:e(j)},{default:_(()=>[$(m(e(j)?"Salvando...":"Salvar AlteraÃ§Ãµes"),1)]),_:1},8,["disabled"])])):y("",!0)]),_:1}),c(F,{title:"ðŸ’° Dados Financeiros",class:"mb-6"},{header:_(()=>[c(B,{variant:"ghost",onClick:a[16]||(a[16]=s=>V.value=!e(V))},{default:_(()=>[$(m(e(V)?"âœ• Cancelar":"âœï¸ Editar"),1)]),_:1})]),default:_(()=>[t("div",qa,[t("div",null,[a[37]||(a[37]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"SalÃ¡rio Base (R$)",-1)),t("div",{class:"p-3 bg-gray-50 rounded-xl border border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors",onClick:a[17]||(a[17]=s=>S.value=!e(S))},[t("div",Ba,[t("p",za,m(e(S)?z(e(p).salario_base):"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),1),(l(),d("svg",{class:L(["w-5 h-5 text-gray-400",{"text-green-600":e(S)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e(S)?(l(),d("path",Oa)):(l(),d("path",Fa))],2))]),t("p",Ra,[a[36]||(a[36]=t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)),$(" "+m(e(S)?"Clique para ocultar":"Clique para revelar")+" â€¢ Campo bloqueado para ediÃ§Ã£o ",1)])])]),c(I,{modelValue:e(p).forma_pagamento,"onUpdate:modelValue":a[18]||(a[18]=s=>e(p).forma_pagamento=s),options:de,label:"Forma de Pagamento",disabled:!e(V)},null,8,["modelValue","disabled"]),c(I,{modelValue:e(p).banco,"onUpdate:modelValue":a[19]||(a[19]=s=>e(p).banco=s),options:re,label:"Banco",disabled:!e(V)},null,8,["modelValue","disabled"]),c(I,{modelValue:e(p).tipo_conta,"onUpdate:modelValue":a[20]||(a[20]=s=>e(p).tipo_conta=s),options:ne,label:"Tipo de Conta",disabled:!e(V)},null,8,["modelValue","disabled"]),c(D,{modelValue:e(p).agencia,"onUpdate:modelValue":a[21]||(a[21]=s=>e(p).agencia=s),label:"AgÃªncia",disabled:!e(V)},null,8,["modelValue","disabled"]),c(D,{modelValue:e(p).conta,"onUpdate:modelValue":a[22]||(a[22]=s=>e(p).conta=s),label:"Conta",disabled:!e(V)},null,8,["modelValue","disabled"]),e(p).forma_pagamento==="pix"?(l(),N(D,{key:0,modelValue:e(p).chave_pix,"onUpdate:modelValue":a[23]||(a[23]=s=>e(p).chave_pix=s),label:"Chave PIX",placeholder:"Digite sua chave PIX (CPF, email, telefone ou chave aleatÃ³ria)",disabled:!e(V)},null,8,["modelValue","disabled"])):y("",!0)]),e(V)?(l(),d("div",La,[c(B,{icon:"ðŸ’¾",onClick:xe,disabled:e(j)},{default:_(()=>[$(m(e(j)?"Salvando...":"Salvar AlteraÃ§Ãµes"),1)]),_:1},8,["disabled"])])):y("",!0)]),_:1}),c(F,{title:"ðŸŽ BenefÃ­cios",class:"mb-6"},{default:_(()=>[c(J,{variant:"info",class:"mb-6"},{default:_(()=>[...a[38]||(a[38]=[$(" Estes benefÃ­cios sÃ£o gerenciados pelo RH e nÃ£o podem ser alterados por vocÃª. ",-1)])]),_:1}),t("div",Ga,[e(M).vale_transporte?(l(),d("div",Ha,[a[40]||(a[40]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Vale Transporte",-1)),t("div",Ja,[t("p",Xa,m(z(e(M).vale_transporte.valor)),1),a[39]||(a[39]=t("p",{class:"text-xs text-green-600 mt-1"},"âœ“ Ativo â€¢ Gerenciado pelo RH",-1))])])):y("",!0),e(M).cesta_basica?(l(),d("div",Ya,[a[42]||(a[42]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Cesta BÃ¡sica",-1)),t("div",Ka,[t("p",Qa,m(z(e(M).cesta_basica.valor)),1),a[41]||(a[41]=t("p",{class:"text-xs text-blue-600 mt-1"},"âœ“ Ativo â€¢ Gerenciado pelo RH",-1))])])):y("",!0),e(M).plano_saude?(l(),d("div",Wa,[a[44]||(a[44]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Plano de SaÃºde",-1)),t("div",Za,[t("p",eo,m(z(e(M).plano_saude.valor_funcionario)),1),a[43]||(a[43]=t("p",{class:"text-xs text-purple-600 mt-1"},"âœ“ Ativo â€¢ Gerenciado pelo RH",-1))])])):y("",!0),e(M).plano_odonto?(l(),d("div",ao,[a[46]||(a[46]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Plano OdontolÃ³gico",-1)),t("div",oo,[t("p",to,m(z(e(M).plano_odonto.valor_funcionario)),1),a[45]||(a[45]=t("p",{class:"text-xs text-indigo-600 mt-1"},"âœ“ Ativo â€¢ Gerenciado pelo RH",-1))])])):y("",!0),(l(!0),d(O,null,le(e(ae),s=>(l(),d("div",{key:s.nome,class:"beneficio-personalizado"},[t("label",so,m(s.nome),1),t("div",lo,[t("div",ro,[t("span",no,m(s.icone||"ðŸŽ¯"),1),t("p",io,m(z(s.valor)),1)]),a[47]||(a[47]=t("p",{class:"text-xs text-orange-600"},"âœ“ Ativo â€¢ Gerenciado pelo RH",-1)),s.descricao?(l(),d("p",uo,m(s.descricao),1)):y("",!0)])]))),128)),e(ve)?y("",!0):(l(),d("div",mo,[...a[48]||(a[48]=[t("div",{class:"text-center py-8 bg-gray-50 rounded-xl border border-gray-200"},[t("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),t("p",{class:"text-gray-600 font-medium"},"Nenhum benefÃ­cio configurado"),t("p",{class:"text-sm text-gray-500 mt-1"},"Entre em contato com o RH para mais informaÃ§Ãµes")],-1)])]))])]),_:1}),c(Ae,{show:e(b),title:e(v).title,message:e(v).message,variant:e(v).variant,onClose:a[24]||(a[24]=s=>b.value=!1)},null,8,["show","title","message","variant"]),c(Ce,{show:e(h),"user-name":e(n)?.nome_completo||e(A)?.nome||"","current-avatar":e(n)?.avatar,onClose:a[25]||(a[25]=s=>h.value=!1),onSave:_e},null,8,["show","user-name","current-avatar"])]))])}}});export{Ao as default};
