import{_ as L}from"./B9ORdSW3.js";import{_ as Q}from"./DKFfuTk7.js";import{_ as G}from"./CEyuO6_n.js";import{_ as K}from"./Bbk0fRQu.js";import{_ as W,a as X}from"./C0CVT-Gk.js";import{u as O}from"./BRUOHGkk.js";import{e as P,l as T,c as m,o as d,a,b as u,m as E,k,d as V,t as l,w as v,i as t,F as B,y as I,q as F,r as D,x as M,C as Y,h as Z,j as R}from"./BlCT4Jl9.js";import{_ as aa}from"./1mwErJ78.js";import{_ as ea}from"./DzxIVruO.js";import{_ as ta}from"./CrqGUWOX.js";const sa={class:"space-y-6"},oa={class:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200"},na={class:"flex items-center justify-between"},la={class:"text-xl font-bold text-gray-800 flex items-center gap-2"},ia={class:"text-gray-600 mt-1"},ra={class:"text-right"},da={class:"text-2xl font-bold text-blue-600"},ua={class:"mt-4 pt-4 border-t border-blue-200"},ma={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center"},ca={class:"text-lg font-semibold text-gray-800"},va={class:"text-lg font-semibold text-gray-800"},_a={class:"text-lg font-semibold text-gray-800"},ga={class:"p-6"},pa={class:"space-y-3"},xa={class:"flex items-center gap-3"},fa={class:"font-semibold text-gray-800"},ba={key:0,class:"text-sm text-gray-500"},ya={key:1,class:"text-sm text-gray-600"},ha={key:0,class:"flex items-center gap-6 text-sm"},$a={class:"text-center"},Va={class:"font-semibold text-gray-800"},ka={key:0,class:"text-center"},ja={class:"font-semibold text-orange-600"},Ca={class:"text-gray-500"},wa={class:"text-center"},Ua={class:"font-semibold text-blue-600"},Ja={key:1,class:"flex items-center gap-2 text-gray-500"},Da=P({__name:"JornadaVisualizacao",props:{jornada:{},mostrarObservacoes:{type:Boolean,default:!0}},setup(x){const j=x,{formatarHorario:_,formatarHorasDecimais:h,obterNomeDia:H,obterAbrevDia:p}=O(),f=T(()=>j.jornada.horarios?[...j.jornada.horarios].sort((b,s)=>b.dia_semana-s.dia_semana):[]),C=T(()=>j.jornada.horarios?j.jornada.horarios.filter(b=>b.trabalha).length:0);return(b,s)=>{const y=G,U=K;return d(),m("div",sa,[a("div",oa,[a("div",na,[a("div",null,[a("h3",la,[V(" ðŸ• "+l(x.jornada.nome)+" ",1),x.jornada.padrao?(d(),E(y,{key:0,variant:"primary"},{default:v(()=>[...s[0]||(s[0]=[V("PadrÃ£o",-1)])]),_:1})):k("",!0)]),a("p",ia,l(x.jornada.descricao),1)]),a("div",ra,[a("div",da,l(t(h)(x.jornada.horas_semanais)),1),s[1]||(s[1]=a("div",{class:"text-sm text-gray-500"},"por semana",-1))])]),a("div",ua,[a("div",ma,[a("div",null,[a("div",ca,l(t(h)(x.jornada.horas_semanais)),1),s[2]||(s[2]=a("div",{class:"text-sm text-gray-500"},"Horas Semanais",-1))]),a("div",null,[a("div",va,l(t(h)(x.jornada.horas_mensais)),1),s[3]||(s[3]=a("div",{class:"text-sm text-gray-500"},"Horas Mensais",-1))]),a("div",null,[a("div",_a,l(t(C))+"/7 ",1),s[4]||(s[4]=a("div",{class:"text-sm text-gray-500"},"Dias por Semana",-1))])])])]),u(U,null,{default:v(()=>[a("div",ga,[s[8]||(s[8]=a("h4",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸ“… HorÃ¡rios Detalhados",-1)),a("div",pa,[(d(!0),m(B,null,I(t(f),r=>(d(),m("div",{key:r.dia_semana,class:F(["flex items-center justify-between p-4 rounded-xl border-2 transition-colors",r.trabalha?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"])},[a("div",xa,[a("div",{class:F(["w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm",r.trabalha?"bg-green-500 text-white":"bg-gray-400 text-white"])},l(t(p)(r.dia_semana)),3),a("div",null,[a("div",fa,l(t(H)(r.dia_semana)),1),r.trabalha?(d(),m("div",ya,l(t(h)(r.horas_liquidas))+" lÃ­quidas ",1)):(d(),m("div",ba," NÃ£o trabalha "))])]),r.trabalha?(d(),m("div",ha,[a("div",$a,[a("div",Va,l(t(_)(r.entrada))+" - "+l(t(_)(r.saida)),1),s[5]||(s[5]=a("div",{class:"text-gray-500"},"Expediente",-1))]),r.intervalo_inicio&&r.intervalo_fim?(d(),m("div",ka,[a("div",ja,l(t(_)(r.intervalo_inicio))+" - "+l(t(_)(r.intervalo_fim)),1),a("div",Ca," Intervalo ("+l(t(h)(r.horas_intervalo))+") ",1)])):k("",!0),a("div",wa,[a("div",Ua,l(t(h)(r.horas_brutas)),1),s[6]||(s[6]=a("div",{class:"text-gray-500"},"Total",-1))])])):(d(),m("div",Ja,[...s[7]||(s[7]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1),a("span",null,"Folga",-1)])]))],2))),128))])])]),_:1}),x.mostrarObservacoes?(d(),E(U,{key:0},{default:v(()=>[...s[9]||(s[9]=[a("div",{class:"p-6"},[a("h4",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸ“ ObservaÃ§Ãµes"),a("div",{class:"space-y-3 text-sm"},[a("div",{class:"flex items-start gap-2"},[a("span",{class:"text-blue-500"},"â„¹ï¸"),a("span",null,"O intervalo de almoÃ§o nÃ£o Ã© contabilizado na carga horÃ¡ria.")]),a("div",{class:"flex items-start gap-2"},[a("span",{class:"text-green-500"},"âœ…"),a("span",null,"Sexta-feira possui jornada reduzida conforme configuraÃ§Ã£o.")]),a("div",{class:"flex items-start gap-2"},[a("span",{class:"text-orange-500"},"âš ï¸"),a("span",null,"Esta jornada Ã© configurada pelo RH e nÃ£o pode ser alterada pelo funcionÃ¡rio.")]),a("div",{class:"flex items-start gap-2"},[a("span",{class:"text-purple-500"},"ðŸ“Š"),a("span",null,"O cÃ¡lculo mensal considera 4,33 semanas por mÃªs em mÃ©dia.")])])],-1)])]),_:1})):k("",!0)])}}}),Ha=Object.assign(Da,{__name:"JornadasJornadaVisualizacao"}),Sa={class:"space-y-6"},za={class:"space-y-4"},Ta={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qa={class:"flex gap-4"},Ea={class:"space-y-4 mt-8"},Na={class:"space-y-4"},Ba={class:"flex items-center justify-between mb-4"},Ia={class:"flex items-center gap-3"},Aa={class:"font-semibold text-gray-800"},Fa={key:0,class:"text-sm text-gray-600"},Ma={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Oa={key:1,class:"mt-4 p-3 bg-gray-50 rounded-lg"},Pa={class:"grid grid-cols-3 gap-4 text-center text-sm"},Ra={class:"font-semibold text-blue-600"},La={class:"font-semibold text-orange-600"},Ga={class:"font-semibold text-green-600"},Ka={class:"mt-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200"},Qa={class:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center"},Wa={class:"text-2xl font-bold text-blue-600"},Xa={class:"text-2xl font-bold text-green-600"},Ya={class:"text-2xl font-bold text-purple-600"},Za={key:0,class:"mt-6"},ae={class:"list-disc list-inside space-y-1"},ee={class:"flex justify-end gap-3 pt-6 border-t mt-8"},te=P({__name:"JornadaForm",props:{jornada:{}},emits:["salvar","cancelar"],setup(x,{emit:j}){const _=x,h=j,{diasSemana:H,formatarHorasDecimais:p,obterNomeDia:f,obterAbrevDia:C,validarJornada:b}=O(),s=D({nome:"",descricao:"",ativa:!0,padrao:!1,horarios:[]}),y=()=>{_.jornada?s.value={nome:_.jornada.nome,descricao:_.jornada.descricao||"",ativa:_.jornada.ativa,padrao:_.jornada.padrao,horarios:_.jornada.horarios?[..._.jornada.horarios]:U()}:s.value={nome:"",descricao:"",ativa:!0,padrao:!1,horarios:U()}},U=()=>H.map(o=>({id:"",jornada_id:"",dia_semana:o.id,entrada:"08:00",saida:"17:00",intervalo_inicio:"12:00",intervalo_fim:"13:00",horas_brutas:0,horas_intervalo:0,horas_liquidas:0,trabalha:o.id<=5})),r=o=>{const e=s.value.horarios[o];if(!e)return;if(!e.trabalha){e.horas_brutas=0,e.horas_intervalo=0,e.horas_liquidas=0;return}const $=new Date(`2000-01-01T${e.entrada}:00`),w=new Date(`2000-01-01T${e.saida}:00`);if(e.horas_brutas=(w.getTime()-$.getTime())/(1e3*60*60),e.intervalo_inicio&&e.intervalo_fim){const q=new Date(`2000-01-01T${e.intervalo_inicio}:00`),J=new Date(`2000-01-01T${e.intervalo_fim}:00`);e.horas_intervalo=(J.getTime()-q.getTime())/(1e3*60*60)}else e.horas_intervalo=0;e.horas_liquidas=Math.max(0,e.horas_brutas-e.horas_intervalo)},S=T(()=>s.value.horarios.filter(o=>o.trabalha).reduce((o,e)=>o+e.horas_liquidas,0)),N=T(()=>S.value*4.33),A=T(()=>s.value.horarios.filter(o=>o.trabalha).length),z=T(()=>{const e=[...b(s.value.horarios).erros];return s.value.nome.trim()||e.push("Nome da jornada Ã© obrigatÃ³rio"),S.value===0&&e.push("A jornada deve ter pelo menos um dia de trabalho"),e}),g=()=>{z.value.length===0&&h("salvar",{...s.value,horas_semanais:S.value,horas_mensais:N.value})};return M(y),Y(()=>_.jornada,y),M(()=>{s.value.horarios.forEach((o,e)=>{r(e)})}),(o,e)=>{const $=aa,w=ea,q=ta,J=L;return d(),m("div",Sa,[a("form",{onSubmit:Z(g,["prevent"])},[a("div",za,[e[5]||(e[5]=a("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸ“‹ InformaÃ§Ãµes BÃ¡sicas",-1)),a("div",Ta,[u($,{modelValue:t(s).nome,"onUpdate:modelValue":e[0]||(e[0]=n=>t(s).nome=n),label:"Nome da Jornada",required:"",placeholder:"Ex: Jornada 42h45min"},null,8,["modelValue"]),a("div",qa,[u(w,{modelValue:t(s).ativa,"onUpdate:modelValue":e[1]||(e[1]=n=>t(s).ativa=n),label:"Jornada Ativa"},null,8,["modelValue"]),u(w,{modelValue:t(s).padrao,"onUpdate:modelValue":e[2]||(e[2]=n=>t(s).padrao=n),label:"Jornada PadrÃ£o"},null,8,["modelValue"])])]),u($,{modelValue:t(s).descricao,"onUpdate:modelValue":e[3]||(e[3]=n=>t(s).descricao=n),label:"DescriÃ§Ã£o",placeholder:"Descreva as caracterÃ­sticas desta jornada"},null,8,["modelValue"])]),a("div",Ea,[e[9]||(e[9]=a("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸ• HorÃ¡rios por Dia da Semana",-1)),a("div",Na,[(d(!0),m(B,null,I(t(s).horarios,(n,i)=>(d(),m("div",{key:n.dia_semana,class:"p-4 border border-gray-200 rounded-xl"},[a("div",Ba,[a("div",Ia,[a("div",{class:F(["w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm",n.trabalha?"bg-green-500 text-white":"bg-gray-400 text-white"])},l(t(C)(n.dia_semana)),3),a("div",null,[a("h4",Aa,l(t(f)(n.dia_semana)),1),n.trabalha?(d(),m("p",Fa,l(t(p)(n.horas_liquidas))+" lÃ­quidas ",1)):k("",!0)])]),u(w,{modelValue:n.trabalha,"onUpdate:modelValue":c=>n.trabalha=c,label:"Trabalha neste dia",onChange:c=>r(i)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),n.trabalha?(d(),m("div",Ma,[u($,{modelValue:n.entrada,"onUpdate:modelValue":c=>n.entrada=c,type:"time",label:"Entrada",required:"",onChange:c=>r(i)},null,8,["modelValue","onUpdate:modelValue","onChange"]),u($,{modelValue:n.saida,"onUpdate:modelValue":c=>n.saida=c,type:"time",label:"SaÃ­da",required:"",onChange:c=>r(i)},null,8,["modelValue","onUpdate:modelValue","onChange"]),u($,{"model-value":n.intervalo_inicio||"","onUpdate:modelValue":c=>n.intervalo_inicio=c||void 0,type:"time",label:"InÃ­cio Intervalo",onChange:c=>r(i)},null,8,["model-value","onUpdate:modelValue","onChange"]),u($,{"model-value":n.intervalo_fim||"","onUpdate:modelValue":c=>n.intervalo_fim=c||void 0,type:"time",label:"Fim Intervalo",onChange:c=>r(i)},null,8,["model-value","onUpdate:modelValue","onChange"])])):k("",!0),n.trabalha?(d(),m("div",Oa,[a("div",Pa,[a("div",null,[a("div",Ra,l(t(p)(n.horas_brutas)),1),e[6]||(e[6]=a("div",{class:"text-gray-500"},"Horas Brutas",-1))]),a("div",null,[a("div",La,l(t(p)(n.horas_intervalo)),1),e[7]||(e[7]=a("div",{class:"text-gray-500"},"Intervalo",-1))]),a("div",null,[a("div",Ga,l(t(p)(n.horas_liquidas)),1),e[8]||(e[8]=a("div",{class:"text-gray-500"},"Horas LÃ­quidas",-1))])])])):k("",!0)]))),128))])]),a("div",Ka,[e[13]||(e[13]=a("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"ðŸ“Š Resumo Total",-1)),a("div",Qa,[a("div",null,[a("div",Wa,l(t(p)(t(S))),1),e[10]||(e[10]=a("div",{class:"text-sm text-gray-600"},"Horas Semanais",-1))]),a("div",null,[a("div",Xa,l(t(p)(t(N))),1),e[11]||(e[11]=a("div",{class:"text-sm text-gray-600"},"Horas Mensais",-1))]),a("div",null,[a("div",Ya,l(t(A))+"/7 ",1),e[12]||(e[12]=a("div",{class:"text-sm text-gray-600"},"Dias por Semana",-1))])])]),t(z).length>0?(d(),m("div",Za,[u(q,{variant:"error",title:"Erros de ValidaÃ§Ã£o"},{default:v(()=>[a("ul",ae,[(d(!0),m(B,null,I(t(z),n=>(d(),m("li",{key:n},l(n),1))),128))])]),_:1})])):k("",!0),a("div",ee,[u(J,{variant:"secondary",onClick:e[4]||(e[4]=n=>o.$emit("cancelar"))},{default:v(()=>[...e[14]||(e[14]=[V(" Cancelar ",-1)])]),_:1}),u(J,{type:"submit",disabled:t(z).length>0},{default:v(()=>[V(" ðŸ’¾ "+l(x.jornada?"Atualizar":"Criar")+" Jornada ",1)]),_:1},8,["disabled"])])],32)])}}}),se=Object.assign(te,{__name:"JornadasJornadaForm"}),oe={class:"space-y-4"},ne={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},le={class:"flex items-center gap-4"},ie={class:"flex items-center gap-2"},re={class:"text-xl font-bold text-gray-800"},de={class:"text-gray-600 mt-1"},ue={class:"flex gap-4 mt-2 text-sm text-gray-500"},me={class:"flex gap-2"},$e=P({__name:"jornadas",setup(x){const{jornadas:j,carregarJornadas:_,salvarJornada:h,formatarHorasDecimais:H}=O(),p=D(!1),f=D(!1),C=D(null),b=D(null),s=D(!1),y=D({title:"",message:"",variant:"success"});M(()=>{_()});const U=g=>{C.value=g,p.value=!0},r=()=>{b.value=null,f.value=!0},S=g=>{b.value=g,f.value=!0},N=async g=>{const o=await h(g);y.value={title:o.success?"Sucesso!":"Erro!",message:o.message,variant:o.success?"success":"error"},s.value=!0,o.success&&(f.value=!1)},A=async g=>{try{g.ativa=!g.ativa,y.value={title:"Status Atualizado!",message:`Jornada ${g.nome} ${g.ativa?"ativada":"inativada"} com sucesso!`,variant:"success"},s.value=!0}catch{y.value={title:"Erro!",message:"Erro ao atualizar status da jornada.",variant:"error"},s.value=!0}},z=g=>({1:15,2:8,3:3})[g]||0;return(g,o)=>{const e=L,$=Q,w=G,q=K,J=W,n=X;return d(),m("div",null,[u($,{title:"Jornadas de Trabalho",description:"Gerencie as jornadas e cargas horÃ¡rias dos funcionÃ¡rios"},{default:v(()=>[u(e,{size:"lg",icon:"âž•",onClick:o[0]||(o[0]=i=>r())},{default:v(()=>[...o[5]||(o[5]=[V(" Nova Jornada ",-1)])]),_:1})]),_:1}),a("div",oe,[(d(!0),m(B,null,I(t(j),i=>(d(),E(q,{key:i.id,padding:"p-6"},{default:v(()=>[a("div",ne,[a("div",le,[o[7]||(o[7]=a("div",{class:"w-16 h-16 bg-blue-100 rounded-xl flex items-center justify-center"},[a("span",{class:"text-blue-700 font-bold text-2xl"},"ðŸ•")],-1)),a("div",null,[a("div",ie,[a("h3",re,l(i.nome),1),i.padrao?(d(),E(w,{key:0,variant:"primary"},{default:v(()=>[...o[6]||(o[6]=[V("PadrÃ£o",-1)])]),_:1})):k("",!0),u(w,{variant:i.ativa?"success":"gray"},{default:v(()=>[V(l(i.ativa?"Ativa":"Inativa"),1)]),_:2},1032,["variant"])]),a("p",de,l(i.descricao),1),a("div",ue,[a("span",null,"ðŸ“… "+l(t(H)(i.horas_semanais))+" semanais",1),a("span",null,"ðŸ“Š "+l(t(H)(i.horas_mensais))+" mensais",1),a("span",null,"ðŸ‘¥ "+l(z(i.id))+" funcionÃ¡rios",1)])])]),a("div",me,[u(e,{variant:"ghost",onClick:c=>U(i)},{default:v(()=>[...o[8]||(o[8]=[V(" ðŸ‘ï¸ Visualizar ",-1)])]),_:1},8,["onClick"]),u(e,{variant:"ghost",onClick:c=>S(i)},{default:v(()=>[...o[9]||(o[9]=[V(" âœï¸ Editar ",-1)])]),_:1},8,["onClick"]),u(e,{variant:i.ativa?"danger":"success",onClick:c=>A(i)},{default:v(()=>[V(l(i.ativa?"ðŸš« Inativar":"âœ“ Ativar"),1)]),_:2},1032,["variant","onClick"])])])]),_:2},1024))),128))]),u(J,{modelValue:t(p),"onUpdate:modelValue":o[1]||(o[1]=i=>R(p)?p.value=i:null),title:`Jornada: ${t(C)?.nome||""}`,"max-width":"max-w-4xl"},{default:v(()=>[t(C)?(d(),E(Ha,{key:0,jornada:t(C)},null,8,["jornada"])):k("",!0)]),_:1},8,["modelValue","title"]),u(J,{modelValue:t(f),"onUpdate:modelValue":o[3]||(o[3]=i=>R(f)?f.value=i:null),title:t(b)?"Editar Jornada":"Nova Jornada","max-width":"max-w-5xl"},{default:v(()=>[u(se,{jornada:t(b),onSalvar:N,onCancelar:o[2]||(o[2]=i=>f.value=!1)},null,8,["jornada"])]),_:1},8,["modelValue","title"]),u(n,{show:t(s),title:t(y).title,message:t(y).message,variant:t(y).variant,onClose:o[4]||(o[4]=i=>s.value=!1)},null,8,["show","title","message","variant"])])}}});export{$e as default};
